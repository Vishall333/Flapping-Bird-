<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flapping Bird - India's Most Trusted Crowdfunding Platform</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00b386;
            --primary-dark: #009970;
            --secondary: #ff4757;
            --accent: #3742fa;
            --success: #2ed573;
            --warning: #ffa502;
            --danger: #ff3838;
            --dark: #2f3542;
            --light: #f1f2f6;
            --gray: #57606f;
            --white: #ffffff;
            --border: #ddd;
            --shadow: rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: #fafbfc;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            background: var(--white);
            box-shadow: 0 2px 10px var(--shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--dark);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .auth-section {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: var(--white);
        }

        .btn-secondary {
            background: var(--secondary);
            color: var(--white);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-large {
            padding: 16px 32px;
            font-size: 1.1rem;
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .btn-warning {
            background: var(--warning);
            color: var(--white);
        }

        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: var(--white);
            padding: 120px 0 80px;
            text-align: center;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.95;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .trust-section {
            background: var(--white);
            padding: 60px 0;
            text-align: center;
        }

        .trust-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .stat-item {
            padding: 2rem;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--gray);
            font-weight: 500;
        }

        .categories-section {
            padding: 80px 0;
            background: var(--light);
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .category-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 20px var(--shadow);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-8px);
        }

        .category-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: var(--white);
        }

        .campaigns-section {
            padding: 80px 0;
            background: var(--white);
        }

        .campaigns-filter {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            border: 2px solid var(--border);
            background: var(--white);
            color: var(--gray);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active,
        .filter-btn:hover {
            border-color: var(--primary);
            background: var(--primary);
            color: var(--white);
        }

        .campaigns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .campaign-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 25px var(--shadow);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .campaign-card:hover {
            transform: translateY(-5px);
        }

        .campaign-image-container {
            position: relative;
            width: 100%;
            height: 220px;
            overflow: hidden;
        }

        .campaign-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .campaign-card:hover .campaign-image {
            transform: scale(1.05);
        }

        .campaign-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--primary);
            color: var(--white);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        .urgent-badge {
            background: var(--danger);
        }

        .campaign-content {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .campaign-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
            line-height: 1.4;
        }

        .campaign-organizer {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .campaign-description {
            color: var(--gray);
            margin-bottom: 1.5rem;
            flex: 1;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .campaign-progress {
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--success));
            border-radius: 4px;
            transition: width 0.3s;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        .amount-raised {
            font-weight: 600;
            color: var(--primary);
        }

        .campaign-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
            gap: 1rem;
        }

        .campaign-actions {
            display: flex;
            gap: 0.5rem;
            flex: 1;
        }

        .admin-actions {
            display: flex;
            gap: 0.5rem;
        }

        .delete-btn {
            background: var(--danger);
            color: var(--white);
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .image-preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .image-preview-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid var(--border);
        }

        .image-preview-item img {
            width: 100%;
            height: 80px;
            object-fit: cover;
        }

        .image-preview-remove {
            position: absolute;
            top: 4px;
            right: 4px;
            background: var(--danger);
            color: var(--white);
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 10px;
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: var(--white);
            margin: 2% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 2rem;
        }

        .close {
            color: var(--gray);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: var(--danger);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 600;
            overflow: hidden;
            position: relative;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--white);
            box-shadow: 0 10px 30px var(--shadow);
            border-radius: 8px;
            min-width: 200px;
            padding: 0.5rem 0;
            display: none;
        }

        .dropdown-item {
            padding: 0.75rem 1rem;
            color: var(--dark);
            text-decoration: none;
            display: block;
            transition: background 0.3s;
        }

        .dropdown-item:hover {
            background: var(--light);
        }

        .profile-section {
            display: none;
            padding: 120px 0 80px;
            min-height: 100vh;
            background: var(--light);
        }

        .profile-section.active {
            display: block;
        }

        .profile-card {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 6px 25px var(--shadow);
            margin-bottom: 2rem;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border);
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 600;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-overlay {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .profile-info h2 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .profile-info p {
            color: var(--gray);
            margin-bottom: 0.25rem;
        }

        .verification-status {
            background: #fff3e0;
            border: 1px solid #f57c00;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .verification-status.verified {
            background: #e8f5e8;
            border-color: #2d5016;
        }

        .verification-status.pending {
            background: #fff3e0;
            border-color: #f57c00;
        }

        .verification-status.unverified {
            background: #ffebee;
            border-color: #d32f2f;
        }

        .campaign-detail {
            display: none;
            padding: 120px 0 80px;
            min-height: 100vh;
            background: var(--light);
        }

        .campaign-detail.active {
            display: block;
        }

        .campaign-detail-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 25px var(--shadow);
            margin-bottom: 2rem;
        }

        .campaign-hero {
            position: relative;
            height: 400px;
            overflow: hidden;
        }

        .campaign-hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .campaign-info {
            padding: 2rem;
        }

        .campaign-detail-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .campaign-meta {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
            color: var(--gray);
        }

        .campaign-story {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--dark);
            margin-bottom: 2rem;
        }

        .donors-section {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 6px 25px var(--shadow);
        }

        .donor-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .donor-info h4 {
            margin-bottom: 0.25rem;
        }

        .donor-amount {
            font-weight: 600;
            color: var(--primary);
        }

        .footer {
            background: var(--dark);
            color: var(--white);
            padding: 3rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .footer-section p {
            color: #adb5bd;
            margin-bottom: 1rem;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .footer-section a {
            color: #adb5bd;
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
            transition: color 0.3s;
            padding: 0.25rem 0;
            font-size: 0.95rem;
        }

        .footer-section a:hover {
            color: var(--white);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            color: var(--white);
            transition: background 0.3s;
        }

        .social-links a:hover {
            background: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #adb5bd;
            font-size: 0.9rem;
        }

        .copyright p {
            margin-bottom: 0.5rem;
        }

        .admin-badge {
            background: var(--warning);
            color: var(--white);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 1rem;
        }

        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: var(--white);
            font-weight: 600;
            z-index: 3000;
            transform: translateX(100%);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success);
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.warning {
            background: var(--warning);
        }

        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            margin-bottom: 1rem;
        }

        .empty-state p {
            margin-bottom: 2rem;
        }

        .faq-item {
            background: var(--white);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .faq-question {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .faq-answer {
            color: var(--gray);
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .btn-large {
                width: 100%;
                margin-bottom: 1rem;
            }

            .campaign-actions {
                flex-direction: column;
            }

            .campaign-detail-title {
                font-size: 2rem;
            }

            .campaign-meta {
                flex-direction: column;
                gap: 1rem;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="container">
            <div class="nav">
                <a href="#" class="logo" onclick="showHomePage()">
                    <i class="fas fa-hands-helping"></i>
                    Flapping Bird
                </a>

                <ul class="nav-links">
                    <li><a href="#campaigns" onclick="showHomePage()">Browse Campaigns</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="#success-stories">Success Stories</a></li>
                    <li><a href="#faqs">FAQs</a></li>
                </ul>

                <div class="auth-section" id="authSection">
                    <button class="btn btn-outline" onclick="openModal('loginModal')">Login</button>
                    <button class="btn btn-primary" onclick="openModal('signupModal')">Sign Up</button>
                </div>

                <div class="user-menu" id="userMenu" style="display: none;">
                    <div class="user-avatar" onclick="toggleDropdown()" id="userAvatarNav">
                        <span id="userInitials">U</span>
                    </div>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="#" class="dropdown-item" onclick="showProfile()"><i class="fas fa-user"></i> Profile</a>
                        <a href="#" class="dropdown-item" onclick="showMyCampaigns()"><i class="fas fa-heart"></i> My Campaigns</a>
                        <a href="#" class="dropdown-item" onclick="showWithdrawals()"><i class="fas fa-wallet"></i> Withdrawals</a>
                        <a href="#" class="dropdown-item" onclick="showMyDonations()"><i class="fas fa-donate"></i> My Donations</a>
                        <a href="#" class="dropdown-item" onclick="showSettings()"><i class="fas fa-cog"></i> Settings</a>
                        <div id="adminMenuItems" style="display: none;">
                            <hr style="margin: 0.5rem 0;">
                            <a href="#" class="dropdown-item" onclick="showAdminPanel()"><i class="fas fa-shield-alt"></i> Admin Panel</a>
                        </div>
                        <hr style="margin: 0.5rem 0;">
                        <a href="#" class="dropdown-item" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <div id="homePage">
        <section class="hero">
            <div class="container">
                <h1>India's Most Trusted Crowdfunding Platform</h1>
                <p>Join millions of Indians who have raised funds for medical emergencies, education, disasters, and social causes</p>
                <div class="hero-buttons">
                    <button class="btn btn-secondary btn-large" onclick="checkAuthAndStartCampaign()">
                        <i class="fas fa-plus"></i> Start Fundraiser
                    </button>
                    <a href="#campaigns" class="btn btn-outline btn-large">
                        <i class="fas fa-search"></i> Browse Campaigns
                    </a>
                </div>
            </div>
        </section>

        <section class="trust-section">
            <div class="container">
                <h2>Trusted by Millions Across India</h2>
                <div class="trust-stats">
                    <div class="stat-item">
                        <div class="stat-number">₹6+ Cr</div>
                        <div class="stat-label">Funds Raised</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1K+</div>
                        <div class="stat-label">Successful Campaigns</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1L+</div>
                        <div class="stat-label">Happy Donors</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">50+</div>
                        <div class="stat-label">Cities Covered</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="categories-section" id="categories">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Fundraise For Any Cause</h2>
                    <p class="section-subtitle">From medical emergencies to education, we support all genuine causes</p>
                </div>
                <div class="categories-grid">
                    <div class="category-card" onclick="filterCampaigns('medical')">
                        <div class="category-icon">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <h3>Medical Emergencies</h3>
                        <p>Help patients get life-saving treatments and surgeries. Support families dealing with critical health conditions including cancer, organ transplants, and emergency medical care.</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('education')">
                        <div class="category-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Education</h3>
                        <p>Support students with tuition fees, books, and educational expenses. Help bright minds achieve their academic dreams regardless of financial constraints.</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('disaster')">
                        <div class="category-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3>Disaster Relief</h3>
                        <p>Aid victims of natural disasters and emergencies. Provide immediate relief including food, shelter, medical aid, and rehabilitation support to affected communities.</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('debt')">
                        <div class="category-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h3>Debt Relief</h3>
                        <p>Help families overcome financial burdens. Support farmers, small business owners, and individuals trapped in cycles of debt to rebuild their lives with dignity.</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('animal')">
                        <div class="category-icon">
                            <i class="fas fa-paw"></i>
                        </div>
                        <h3>Animal Welfare</h3>
                        <p>Support rescue and care for animals in need. Fund animal shelters, medical treatments for injured animals, and wildlife conservation efforts.</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('social')">
                        <div class="category-icon">
                            <i class="fas fa-hands-helping"></i>
                        </div>
                        <h3>Social Causes</h3>
                        <p>Make a difference in your community. Support initiatives for clean water, education infrastructure, women empowerment, and sustainable development projects.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="categories-section" id="success-stories" style="background: var(--white);">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Success Stories That Inspire</h2>
                    <p class="section-subtitle">Real people, real impact - see how your donations change lives</p>
                </div>
                <div class="categories-grid">
                    <div class="category-card" style="background: linear-gradient(135deg, #e8f5e8, #f0fff0); border: 1px solid var(--success);">
                        <div class="category-icon" style="background: linear-gradient(135deg, var(--success), #2d5016);">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>Priya's Heart Surgery - ₹12 Lakhs Raised</h3>
                        <p>"Thanks to 847 generous donors, our 6-year-old daughter got her life-saving heart surgery. She's now healthy and back to school. Forever grateful!" - Rajesh & Meera</p>
                        <small style="color: var(--success); font-weight: 600;">✓ Campaign Completed Successfully</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #e3f2fd, #f3e5f5); border: 1px solid var(--accent);">
                        <div class="category-icon" style="background: linear-gradient(135deg, var(--accent), #1976d2);">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Arjun's Engineering Dream - ₹4 Lakhs Raised</h3>
                        <p>"A village boy's dream to become an engineer came true. Now I'm in my final year at IIT Delhi, all thanks to the kindness of 312 supporters who believed in education."</p>
                        <small style="color: var(--accent); font-weight: 600;">✓ Graduate in 2024</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #fff3e0, #ffeaa7); border: 1px solid var(--warning);">
                        <div class="category-icon" style="background: linear-gradient(135deg, var(--warning), #f57c00);">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3>Kerala Flood Relief - ₹25 Lakhs Raised</h3>
                        <p>"After losing everything in floods, 1,200+ donors helped us rebuild 45 homes. Families are back to their normal lives with dignity and hope restored."</p>
                        <small style="color: var(--warning); font-weight: 600;">✓ 45 Families Rehabilitated</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #ffebee, #fce4ec); border: 1px solid var(--secondary);">
                        <div class="category-icon" style="background: linear-gradient(135deg, var(--secondary), #c62828);">
                            <i class="fas fa-paw"></i>
                        </div>
                        <h3>Shelter for 200 Stray Dogs - ₹8 Lakhs Raised</h3>
                        <p>"Our animal shelter was about to close, but 567 animal lovers came together to save it. Now 200+ rescued dogs have a safe home and medical care."</p>
                        <small style="color: var(--secondary); font-weight: 600;">✓ Shelter Operating Successfully</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #f3e5f5, #e8eaf6); border: 1px solid #9c27b0;">
                        <div class="category-icon" style="background: linear-gradient(135deg, #9c27b0, #6a1b9a);">
                            <i class="fas fa-hand-holding-medical"></i>
                        </div>
                        <h3>Cancer Treatment for Grandmother - ₹15 Lakhs Raised</h3>
                        <p>"Dadi defeated cancer at 78! The treatment cost seemed impossible, but 923 kind souls made the miracle happen. She's cancer-free for 2 years now."</p>
                        <small style="color: #9c27b0; font-weight: 600;">✓ Cancer-Free for 2 Years</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #e0f2f1, #e8f5e8); border: 1px solid #00796b;">
                        <div class="category-icon" style="background: linear-gradient(135deg, #00796b, #004d40);">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <h3>Farmer Debt Relief - ₹6 Lakhs Raised</h3>
                        <p>"After three failed crops, we thought we'd lose our ancestral land. But 234 supporters helped clear our debt. This season's harvest was our best ever!"</p>
                        <small style="color: #00796b; font-weight: 600;">✓ Farm Saved, Family Secure</small>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 3rem;">
                    <p style="font-size: 1.2rem; color: var(--gray); margin-bottom: 2rem;">Your donation could be the next success story. Every contribution creates ripples of hope.</p>
                    <button class="btn btn-primary btn-large" onclick="scrollToCampaigns()">
                        <i class="fas fa-heart"></i> Be Part of a Success Story
                    </button>
                </div>
            </div>
        </section>

        <section class="campaigns-section" id="campaigns">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Featured Campaigns</h2>
                    <p class="section-subtitle">Support these urgent campaigns that need your help today</p>
                </div>

                <div class="campaigns-filter">
                    <button class="filter-btn active" data-filter="all">All Campaigns</button>
                    <button class="filter-btn" data-filter="medical">Medical</button>
                    <button class="filter-btn" data-filter="education">Education</button>
                    <button class="filter-btn" data-filter="disaster">Emergency</button>
                    <button class="filter-btn" data-filter="debt">Debt Relief</button>
                    <button class="filter-btn" data-filter="animal">Animals</button>
                </div>

                <div class="campaigns-grid" id="campaignsGrid">
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: var(--gray);">
                        <i class="fas fa-spinner fa-spin" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>Loading campaigns...</h3>
                    </div>
                </div>
            </div>
        </section>

        <section class="categories-section" id="faqs" style="background: var(--light);">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Frequently Asked Questions</h2>
                    <p class="section-subtitle">Everything you need to know about crowdfunding on Flapping Bird</p>
                </div>

                <div style="max-width: 900px; margin: 0 auto;">
                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>How do I start a fundraiser?</div>
                        <div class="faq-answer">Starting a fundraiser is simple: Click "Start Fundraiser", fill in campaign details including title, goal amount, and your story. Upload supporting documents (medical bills, admission letters, etc.), and submit for review. Our team will verify and approve within 24-48 hours.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>Is there any fee to create a campaign?</div>
                        <div class="faq-answer">Creating a campaign is completely FREE. We charge a small platform fee of 5% only on successfully raised funds. Payment gateway charges (2-3%) apply for online transactions. There are no hidden charges or upfront costs.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>How long does verification take?</div>
                        <div class="faq-answer">Campaign verification typically takes 24-48 hours. Account verification (required for withdrawals) takes 2-3 business days. We manually review each campaign to ensure authenticity and protect our donor community.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>When can I withdraw the funds?</div>
                        <div class="faq-answer">You can request withdrawals anytime after receiving donations. Complete your account verification (Aadhaar, PAN, bank details) first. Provide supporting documents (bills, receipts) for faster processing. Funds are transferred within 3-5 business days. Minimum withdrawal amount is ₹1,000.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>What documents do I need for verification?</div>
                        <div class="faq-answer">For account verification: Aadhaar card, PAN card, bank account details, and IFSC code. For campaign verification: Relevant supporting documents like medical reports, hospital bills, admission letters, or emergency certificates depending on your cause.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>Is my donation secure and tax-deductible?</div>
                        <div class="faq-answer">Yes, absolutely! All payments are processed through PCI DSS compliant secure gateways with industry-standard encryption. Donations to registered charitable campaigns are eligible for tax benefits under Section 80G. You'll receive an official tax receipt via email.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>What if my campaign doesn't reach its goal?</div>
                        <div class="faq-answer">You can still withdraw whatever amount was raised! There's no "all-or-nothing" rule. Many campaigns continue receiving support even after their target date. You can also extend your campaign duration or update your story to attract more donors.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>How do I share my campaign to get more donations?</div>
                        <div class="faq-answer">Use the share button on your campaign page to share via WhatsApp, Facebook, Twitter, email, or copy the link. Share personal updates regularly, post campaign progress, thank donors publicly, and reach out to friends, family, and community groups for maximum visibility.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>Can I edit my campaign after it's published?</div>
                        <div class="faq-answer">Yes, you can add updates and post new information anytime. For major changes to campaign details (title, goal, story), contact our support team. We'll review and approve changes to maintain transparency with existing donors.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>What makes Flapping Bird different from other platforms?</div>
                        <div class="faq-answer">We offer: ✓ Zero upfront costs ✓ Fastest verification (24-48 hrs) ✓ Lowest platform fee (5%) ✓ 24/7 support ✓ No all-or-nothing rule ✓ Tax benefits ✓ Personal campaign manager for large campaigns ✓ Free social media promotion for urgent cases</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question"><i class="fas fa-question-circle" style="color: var(--primary); margin-right: 0.5rem;"></i>How do I contact support?</div>
                        <div class="faq-answer">We're here 24/7! Contact us via: 📞 Phone: +91-124-4567890 | 📧 Email: support@flappingbird.in | 💬 Live Chat (on website) | 📱 WhatsApp: +91-9876543210. Average response time: 2-4 hours for general queries, immediate for urgent issues.</div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 3rem; padding: 2rem; background: var(--white); border-radius: 12px;">
                    <h3 style="color: var(--primary); margin-bottom: 1rem;">Still have questions?</h3>
                    <p style="color: var(--gray); margin-bottom: 2rem;">Our support team is always ready to help you with any queries!</p>
                    <button class="btn btn-primary" onclick="alert('Contact: support@flappingbird.in or +91-124-4567890')">
                        <i class="fas fa-headset"></i> Contact Support
                    </button>
                </div>
            </div>
        </section>
    </div>

    <section class="profile-section" id="profileSection">
        <div class="container">
            <button class="btn btn-outline" onclick="showHomePage()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Home
            </button>

            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar" onclick="uploadProfilePicture()">
                        <span id="profileInitials">U</span>
                        <div class="upload-overlay">
                            <i class="fas fa-camera" style="color: white; font-size: 12px;"></i>
                        </div>
                    </div>
                    <input type="file" id="profilePictureInput" accept="image/*" style="display: none;" onchange="handleProfilePictureUpload(event)">
                    <div class="profile-info">
                        <h2 id="profileName">User Name</h2>
                        <p id="profileEmail">user@example.com</p>
                        <p id="profilePhone">+91-9876543210</p>
                        <button class="btn btn-outline btn-small" onclick="editProfile()">
                            <i class="fas fa-edit"></i> Edit Profile
                        </button>
                    </div>
                </div>

                <div id="verificationStatus" class="verification-status unverified">
                    <h4><i class="fas fa-exclamation-triangle"></i> Account Verification Required</h4>
                    <p>Please complete your profile verification to start fundraising and withdraw funds.</p>
                    <button class="btn btn-warning btn-small" onclick="showVerificationForm()">
                        <i class="fas fa-shield-alt"></i> Complete Verification
                    </button>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2><i class="fas fa-heart"></i> My Campaigns</h2>
                    <button class="btn btn-primary" onclick="checkAuthAndStartCampaign()">
                        <i class="fas fa-plus"></i> Create New Campaign
                    </button>
                </div>

                <div id="userCampaignsList">
                    <div class="empty-state">
                        <i class="fas fa-heart-broken"></i>
                        <h3>No Campaigns Yet</h3>
                        <p>You haven't created any campaigns yet. Start your first fundraiser to make a difference!</p>
                        <button class="btn btn-primary" onclick="checkAuthAndStartCampaign()">
                            <i class="fas fa-plus"></i> Create Your First Campaign
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="campaign-detail" id="campaignDetail">
        <div class="container">
            <button class="btn btn-outline" onclick="showHomePage()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Campaigns
            </button>

            <div class="campaign-detail-card">
                <div class="campaign-hero">
                    <img id="detailCampaignImage" src="" alt="Campaign Image">
                    <div class="campaign-badge" id="detailCampaignBadge">ACTIVE</div>
                </div>

                <div class="campaign-info">
                    <h1 class="campaign-detail-title" id="detailCampaignTitle"></h1>

                    <div class="campaign-meta">
                        <div><i class="fas fa-user"></i> <span id="detailCampaignOrganizer"></span></div>
                        <div><i class="fas fa-map-marker-alt"></i> <span id="detailCampaignLocation"></span></div>
                        <div><i class="fas fa-calendar"></i> <span id="detailCampaignDate"></span></div>
                    </div>

                    <div class="campaign-progress" style="margin-bottom: 2rem;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="detailProgressFill"></div>
                        </div>
                        <div class="progress-info">
                            <span class="amount-raised" id="detailAmountRaised">₹0</span>
                            <span id="detailGoalAmount">₹0</span>
                        </div>
                        <div class="progress-info">
                            <span id="detailDonorCount">0 donors</span>
                            <span id="detailDaysLeft">0 days left</span>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                        <button class="btn btn-primary btn-large" onclick="openDonationModal()" style="flex: 1;">
                            <i class="fas fa-heart"></i> Donate Now
                        </button>
                        <button class="btn btn-outline" onclick="shareCampaign()">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                    </div>

                    <div class="campaign-story" id="detailCampaignStory"></div>
                </div>
            </div>

            <div class="donors-section">
                <h2 style="margin-bottom: 1.5rem;"><i class="fas fa-users"></i> Recent Donors</h2>
                <div id="donorsList"></div>
            </div>
        </div>
    </div>

    <div class="campaign-detail" id="adminPanel">
        <div class="container">
            <button class="btn btn-outline" onclick="showHomePage()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Home
            </button>

            <div class="campaign-detail-card">
                <div class="campaign-info">
                    <h1 class="campaign-detail-title">
                        <i class="fas fa-shield-alt"></i> Admin Panel
                        <span class="admin-badge">ADMIN</span>
                    </h1>

                    <div style="margin-bottom: 2rem;">
                        <h3>Pending Campaign Approvals</h3>
                        <div id="pendingCampaigns"></div>
                    </div>

                    <div>
                        <h3>All Campaigns</h3>
                        <div id="allCampaignsAdmin"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-sign-in-alt"></i> Login to Your Account</h2>
                <span class="close" onclick="closeModal('loginModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                </form>
                <p style="text-align: center; margin-top: 1rem;">
                    Don't have an account? <a href="#" onclick="closeModal('loginModal'); openModal('signupModal')">Sign up</a>
                </p>
            </div>
        </div>
    </div>

    <div id="signupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-user-plus"></i> Create Your Account</h2>
                <span class="close" onclick="closeModal('signupModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="signupForm">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="signupName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="signupEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="signupPhone" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="signupPassword" required>
                        <small style="color: #666;">Minimum 6 characters</small>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Send OTP</button>
                </form>
                <p style="text-align: center; margin-top: 1rem;">
                    Already have an account? <a href="#" onclick="closeModal('signupModal'); openModal('loginModal')">Login</a>
                </p>
            </div>
        </div>
    </div>

    <div id="otpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-shield-alt"></i> Verify Your Email</h2>
                <span class="close" onclick="closeModal('otpModal'); openModal('signupModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div style="background: var(--light); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <i class="fas fa-envelope" style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;"></i>
                        <p>We've sent a 6-digit OTP to:</p>
                        <p style="font-weight: 600; color: var(--primary);" id="otpEmail">user@example.com</p>
                        <p style="color: var(--gray); font-size: 0.9rem;">Please check your inbox (and spam folder) for the verification code.</p>
                    </div>
                </div>

                <form id="otpForm">
                    <div class="form-group">
                        <label class="form-label">Enter 6-Digit OTP</label>
                        <input type="text" class="form-control" id="otpCode" placeholder="Enter OTP" maxlength="6" style="text-align: center; font-size: 1.5rem; letter-spacing: 0.5rem;" required>
                    </div>

                    <div style="text-align: center; margin: 1rem 0;">
                        <p style="color: var(--gray);">
                            Time remaining: <span id="otpTimer" style="font-weight: 600; color: var(--primary);">15:00</span>
                        </p>
                        <button type="button" id="resendOTP" class="btn btn-outline btn-small" onclick="resendOTP()" style="display: none;">
                            <i class="fas fa-redo"></i> Resend OTP
                        </button>
                    </div>

                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-check"></i> Verify & Create Account
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div id="createCampaignModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-plus-circle"></i> Start Your Fundraiser</h2>
                <span class="close" onclick="closeModal('createCampaignModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="campaignForm">
                    <div class="form-group">
                        <label class="form-label">Campaign Title</label>
                        <input type="text" class="form-control" name="title" placeholder="e.g., Help Priya Fight Cancer" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-control" name="category" required>
                            <option value="">Select Category</option>
                            <option value="medical">Medical Emergency</option>
                            <option value="education">Education</option>
                            <option value="disaster">Disaster Relief</option>
                            <option value="debt">Debt Relief</option>
                            <option value="animal">Animal Welfare</option>
                            <option value="social">Social Cause</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Funding Goal (₹)</label>
                        <input type="number" class="form-control" name="goal" min="10000" placeholder="Enter amount needed" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <input type="text" class="form-control" name="location" placeholder="City, State" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Campaign Duration</label>
                        <select class="form-control" name="duration" required>
                            <option value="">Select Duration</option>
                            <option value="30">30 days</option>
                            <option value="60">60 days</option>
                            <option value="90">90 days</option>
                            <option value="ongoing">Keep running until goal is met</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Your Story</label>
                        <textarea class="form-control" name="description" rows="6" placeholder="Tell people why you're raising funds." required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Upload Campaign Images (Maximum 5)</label>
                        <input type="file" id="campaignImages" class="form-control" accept="image/*" multiple onchange="previewCampaignImages(event)">
                        <small style="color: #666; display: block; margin-top: 0.5rem;">Upload clear photos that show the situation.</small>
                        <div id="imagePreview" class="image-preview-container"></div>
                    </div>

                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-rocket"></i> Create Campaign
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div id="donationModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-heart"></i> Make a Donation</h2>
                <span class="close" onclick="closeModal('donationModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="donationCampaignInfo" style="margin-bottom: 2rem;"></div>

                <form id="donationForm">
                    <div class="form-group">
                        <label class="form-label">Donation Amount (₹)</label>
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                            <button type="button" class="btn btn-outline btn-small" onclick="setDonationAmount(500)">₹500</button>
                            <button type="button" class="btn btn-outline btn-small" onclick="setDonationAmount(1000)">₹1,000</button>
                            <button type="button" class="btn btn-outline btn-small" onclick="setDonationAmount(2500)">₹2,500</button>
                            <button type="button" class="btn btn-outline btn-small" onclick="setDonationAmount(5000)">₹5,000</button>
                        </div>
                        <input type="number" class="form-control" id="donationAmount" placeholder="Enter custom amount" min="100" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" class="form-control" id="donorName" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Your Email</label>
                        <input type="email" class="form-control" id="donorEmail" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Message (Optional)</label>
                        <textarea class="form-control" id="donorMessage" placeholder="Write an encouraging message..."></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-heart"></i> Donate Now
                    </button>
                </form>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About Flapping Bird</h3>
                    <p>India's most trusted crowdfunding platform helping millions raise funds for medical emergencies, education, and social causes. We believe in the power of collective giving to create positive change in society. Since our inception, we've helped raise over ₹6 crores for various causes across 50+ cities in India.</p>
                    <div class="social-links">
                        <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div class="footer-section">
                    <h3>Campaigns</h3>
                    <a href="#" onclick="filterCampaigns('medical')">Medical Fundraising</a>
                    <a href="#" onclick="filterCampaigns('education')">Education Fundraising</a>
                    <a href="#" onclick="filterCampaigns('disaster')">Emergency Relief</a>
                    <a href="#" onclick="filterCampaigns('animal')">Animal Welfare</a>
                </div>

                <div class="footer-section">
                    <h3>Support</h3>
                    <a href="#">How It Works</a>
                    <a href="#">Safety & Security</a>
                    <a href="#">Help Center</a>
                    <a href="#">Contact Support</a>
                </div>

                <div class="footer-section">
                    <h3>Legal</h3>
                    <a href="#">Terms of Service</a>
                    <a href="#">Privacy Policy</a>
                    <a href="#">Refund Policy</a>
                </div>
            </div>

            <div class="copyright">
                <p>&copy; 2024 Flapping Bird Technologies Pvt Ltd. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            emailjs.init("9xuGthPm0Uw3wvgiX");
        })();
    </script>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
        import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, getDoc, getDocs, query, where, orderBy, onSnapshot, setDoc } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDvi5Arr_qEJv5UsocpIIrOBmxYcbCoN2E",
            authDomain: "flapping-bird-f9a21.firebaseapp.com",
            projectId: "flapping-bird-f9a21",
            storageBucket: "flapping-bird-f9a21.firebasestorage.app",
            messagingSenderId: "501160247273",
            appId: "1:501160247273:web:eec35ea17b64aa7dbbd578",
            measurementId: "G-SDPQVPP3TD"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const storage = getStorage(app);

        window.firebaseServices = { db, auth, storage, addDoc, collection, updateDoc, doc, getDocs, query, where, orderBy, onSnapshot, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, ref, uploadBytes, getDownloadURL, deleteDoc, setDoc, getDoc };
    </script>

    <script>
        let currentUser = null;
        let currentCampaignId = null;
        let campaigns = [];
        let campaignImages = [];
        let userVerificationStatus = 'unverified';
        let pendingSignupData = null;
        let generatedOTP = null;
        let otpExpiryTime = null;

        async function loadCampaignsFromFirebase() {
            try {
                const { getDocs, collection, query, where } = window.firebaseServices;
                const campaignsRef = collection(window.firebaseServices.db, 'campaigns');
                const q = query(campaignsRef, where('status', '==', 'active'));
                const querySnapshot = await getDocs(q);

                campaigns = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    campaigns.push({
                        id: doc.id,
                        ...data,
                        created: data.created?.toDate ? data.created.toDate() : new Date(data.created || Date.now()),
                        raised: data.raised || 0,
                        goal: data.goal || 0,
                        donors: data.donors || 0,
                        daysLeft: data.daysLeft || 30
                    });
                });

                renderCampaigns();
            } catch (error) {
                console.error('Error loading campaigns:', error);
                showNotification('Failed to load campaigns: ' + error.message, 'error');
            }
        }

        async function loadUserProfile() {
            if (!currentUser) return;

            try {
                const { getDoc, doc } = window.firebaseServices;
                const userRef = doc(window.firebaseServices.db, 'users', currentUser.uid);
                const userDoc = await getDoc(userRef);

                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    if (userData.profilePictureURL) {
                        const avatarElements = document.querySelectorAll('#profileAvatar, #userAvatarNav');
                        avatarElements.forEach(avatar => {
                            avatar.innerHTML = `<img src="${userData.profilePictureURL}" alt="Profile Picture">`;
                        });
                    }
                    userVerificationStatus = userData.verificationStatus || 'unverified';
                    updateVerificationUI();
                }
            } catch (error) {
                console.error('Error loading user profile:', error);
            }
        }

        async function handleProfilePictureUpload(event) {
            const file = event.target.files[0];
            if (!file || !currentUser) return;

            try {
                const { ref, uploadBytes, getDownloadURL } = window.firebaseServices;
                const { setDoc, doc } = window.firebaseServices;

                showNotification('Uploading profile picture...', 'info');

                const storageRef = ref(window.firebaseServices.storage, `profile_pictures/${currentUser.uid}`);
                await uploadBytes(storageRef, file);
                const downloadURL = await getDownloadURL(storageRef);

                await setDoc(doc(window.firebaseServices.db, 'users', currentUser.uid), {
                    profilePictureURL: downloadURL
                }, { merge: true });

                const avatarElements = document.querySelectorAll('#profileAvatar, #userAvatarNav');
                avatarElements.forEach(avatar => {
                    avatar.innerHTML = `<img src="${downloadURL}" alt="Profile Picture">`;
                });

                showNotification('Profile picture updated successfully!', 'success');
            } catch (error) {
                showNotification('Failed to upload profile picture: ' + error.message, 'error');
            }
        }

        async function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const { signInWithEmailAndPassword } = window.firebaseServices;
                const userCredential = await signInWithEmailAndPassword(window.firebaseServices.auth, email, password);

                showNotification('Login successful! Welcome back.', 'success');

                const isAdmin = email === 'vishuu7306@gmail.com';

                currentUser = {
                    uid: userCredential.user.uid,
                    name: userCredential.user.displayName || email.split('@')[0],
                    email: userCredential.user.email,
                    phone: '',
                    isAdmin: isAdmin
                };

                await loadUserProfile();
                updateAuthUI();
                closeModal('loginModal');
            } catch (error) {
                showNotification('Login failed: ' + error.message, 'error');
            }
        }

        async function handleSignup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const phone = document.getElementById('signupPhone').value;
            const password = document.getElementById('signupPassword').value;

            if (!name || !email || !phone || !password) {
                showNotification('Please fill in all required fields.', 'warning');
                return;
            }

            if (password.length < 6) {
                showNotification('Password must be at least 6 characters long.', 'warning');
                return;
            }

            pendingSignupData = { name, email, phone, password };
            await sendSignupOTP(name, email);
        }

        async function sendSignupOTP(name, email) {
            try {
                generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();
                otpExpiryTime = Date.now() + (15 * 60 * 1000);

                const templateParams = {
                    to_name: name,
                    to_email: email,
                    otp_code: generatedOTP,
                    from_name: 'Flapping Bird Team',
                    message: `Your OTP for Flapping Bird account verification is: ${generatedOTP}. This OTP will expire in 15 minutes.`
                };

                showNotification('Sending OTP...', 'info');

                await emailjs.send('service_1xqntbe', 'template_3dhsz8r', templateParams);

                closeModal('signupModal');
                openModal('otpModal');

                document.getElementById('otpEmail').textContent = email;
                document.getElementById('otpCode').value = '';

                startOTPTimer();

                showNotification('OTP sent successfully! Please check your email inbox.', 'success');

            } catch (error) {
                showNotification('Failed to send OTP: ' + error.message, 'error');
            }
        }

        function startOTPTimer() {
            const timerElement = document.getElementById('otpTimer');
            const resendButton = document.getElementById('resendOTP');

            let timeLeft = 900;
            resendButton.style.display = 'none';

            const timer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timerElement.textContent = 'OTP Expired';
                    resendButton.style.display = 'inline-block';
                    generatedOTP = null;
                    otpExpiryTime = null;
                }
                timeLeft--;
            }, 1000);
        }

        async function verifyOTP() {
            const enteredOTP = document.getElementById('otpCode').value.trim();

            if (!enteredOTP) {
                showNotification('Please enter the OTP code.', 'warning');
                return;
            }

            if (enteredOTP.length !== 6) {
                showNotification('OTP must be 6 digits.', 'warning');
                return;
            }

            if (!generatedOTP || Date.now() > otpExpiryTime) {
                showNotification('OTP has expired. Please request a new one.', 'error');
                document.getElementById('resendOTP').style.display = 'inline-block';
                return;
            }

            if (enteredOTP !== generatedOTP) {
                showNotification('Invalid OTP. Please check and try again.', 'error');
                document.getElementById('otpCode').value = '';
                return;
            }

            showNotification('OTP verified successfully! Creating your account...', 'success');
            await createAccountAfterOTP();
        }

        async function createAccountAfterOTP() {
            try {
                const { createUserWithEmailAndPassword, setDoc, doc } = window.firebaseServices;
                const { name, email, phone, password } = pendingSignupData;

                const userCredential = await createUserWithEmailAndPassword(window.firebaseServices.auth, email, password);

                await setDoc(doc(window.firebaseServices.db, 'users', userCredential.user.uid), {
                    name: name,
                    email: email,
                    phone: phone,
                    verificationStatus: 'unverified',
                    createdAt: new Date()
                });

                showNotification('Account created successfully! Welcome to Flapping Bird.', 'success');

                const isAdmin = email === 'vishuu7306@gmail.com';

                currentUser = {
                    uid: userCredential.user.uid,
                    name: name,
                    email: email,
                    phone: phone,
                    isAdmin: isAdmin
                };

                updateAuthUI();
                closeModal('otpModal');

                pendingSignupData = null;
                generatedOTP = null;
                otpExpiryTime = null;

            } catch (error) {
                showNotification('Account creation failed: ' + error.message, 'error');
            }
        }

        async function resendOTP() {
            if (pendingSignupData) {
                await sendSignupOTP(pendingSignupData.name, pendingSignupData.email);
            } else {
                showNotification('Session expired. Please start signup process again.', 'error');
                closeModal('otpModal');
                openModal('signupModal');
            }
        }

        function updateAuthUI() {
            const authSection = document.getElementById('authSection');
            const userMenu = document.getElementById('userMenu');
            const adminMenuItems = document.getElementById('adminMenuItems');

            if (currentUser) {
                authSection.style.display = 'none';
                userMenu.style.display = 'block';

                const initials = currentUser.name.charAt(0).toUpperCase();
                document.getElementById('userInitials').textContent = initials;

                document.getElementById('profileName').textContent = currentUser.name;
                document.getElementById('profileEmail').textContent = currentUser.email;
                document.getElementById('profilePhone').textContent = currentUser.phone || '+91-XXXXXXXXXX';
                document.getElementById('profileInitials').textContent = initials;

                if (currentUser.isAdmin) {
                    adminMenuItems.style.display = 'block';
                } else {
                    adminMenuItems.style.display = 'none';
                }

                updateVerificationUI();
            } else {
                authSection.style.display = 'flex';
                userMenu.style.display = 'none';
            }
        }

        async function logout() {
            try {
                if (window.firebaseServices) {
                    await window.firebaseServices.signOut(window.firebaseServices.auth);
                }
                currentUser = null;
                userVerificationStatus = 'unverified';
                updateAuthUI();
                showHomePage();
                showNotification('Logged out successfully', 'success');
            } catch (error) {
                showNotification('Logout failed: ' + error.message, 'error');
            }
        }

        async function createCampaign() {
            if (!currentUser) {
                showNotification('Please login to create a campaign', 'warning');
                openModal('loginModal');
                return;
            }

            const formData = new FormData(document.getElementById('campaignForm'));

            try {
                showNotification('Creating campaign...', 'info');

                let imageURL = 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=300&fit=crop';

                if (campaignImages.length > 0) {
                    const { ref, uploadBytes, getDownloadURL } = window.firebaseServices;
                    const file = campaignImages[0];
                    const storageRef = ref(window.firebaseServices.storage, `campaign_images/${Date.now()}_${file.name}`);
                    await uploadBytes(storageRef, file);
                    imageURL = await getDownloadURL(storageRef);
                }

                const { addDoc, collection } = window.firebaseServices;
                const campaignData = {
                    title: formData.get('title'),
                    category: formData.get('category'),
                    description: formData.get('description'),
                    goal: parseInt(formData.get('goal')),
                    location: formData.get('location'),
                    duration: formData.get('duration'),
                    raised: 0,
                    organizer: {
                        uid: currentUser.uid,
                        name: currentUser.name,
                        email: currentUser.email
                    },
                    status: 'pending',
                    donors: 0,
                    daysLeft: formData.get('duration') === 'ongoing' ? 999 : parseInt(formData.get('duration')),
                    urgent: false,
                    image: imageURL,
                    created: new Date()
                };

                await addDoc(collection(window.firebaseServices.db, 'campaigns'), campaignData);

                closeModal('createCampaignModal');
                document.getElementById('campaignForm').reset();
                document.getElementById('imagePreview').innerHTML = '';
                campaignImages = [];

                showNotification('Campaign submitted for admin approval!', 'success');

            } catch (error) {
                showNotification('Failed to create campaign: ' + error.message, 'error');
            }
        }

        async function approveCampaign(campaignId) {
            if (!currentUser || !currentUser.isAdmin) return;

            try {
                const { updateDoc, doc } = window.firebaseServices;
                await updateDoc(doc(window.firebaseServices.db, 'campaigns', campaignId), {
                    status: 'active'
                });

                await loadCampaignsFromFirebase();
                renderAdminPanel();
                showNotification('Campaign approved and is now live!', 'success');
            } catch (error) {
                showNotification('Failed to approve campaign: ' + error.message, 'error');
            }
        }

        async function deleteCampaign(campaignId) {
            if (!currentUser) return;

            if (confirm('Are you sure you want to delete this campaign?')) {
                try {
                    const { deleteDoc, doc } = window.firebaseServices;
                    await deleteDoc(doc(window.firebaseServices.db, 'campaigns', campaignId));

                    await loadCampaignsFromFirebase();
                    renderAdminPanel();
                    showNotification('Campaign deleted successfully.', 'success');
                } catch (error) {
                    showNotification('Failed to delete campaign: ' + error.message, 'error');
                }
            }
        }

        function renderCampaigns(filter = 'all') {
            const grid = document.getElementById('campaignsGrid');
            let filteredCampaigns = campaigns.filter(c => c.status === 'active');

            if (filter !== 'all') {
                filteredCampaigns = filteredCampaigns.filter(c => c.category === filter);
            }

            if (filteredCampaigns.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: var(--gray);">
                        <i class="fas fa-search" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>No Campaigns Found</h3>
                        <p>No campaigns match your current filter.</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredCampaigns.map(campaign => {
                const raised = campaign.raised || 0;
                const goal = campaign.goal;
                const progressPercentage = Math.min((raised / goal) * 100, 100);
                const canDelete = currentUser && (
                    currentUser.isAdmin || 
                    (campaign.organizer && campaign.organizer.uid === currentUser.uid)
                );

                return `
                    <div class="campaign-card" data-category="${campaign.category}">
                        <div class="campaign-image-container">
                            <img src="${campaign.image}" alt="${campaign.title}" class="campaign-image">
                            <div class="campaign-badge ${campaign.urgent ? 'urgent-badge' : ''}">${campaign.urgent ? 'URGENT' : 'ACTIVE'}</div>
                        </div>
                        <div class="campaign-content">
                            <h3 class="campaign-title">${campaign.title}</h3>
                            <p class="campaign-organizer">by ${campaign.organizer.name} • ${campaign.location}</p>
                            <p class="campaign-description">${campaign.description}</p>
                            <div class="campaign-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${progressPercentage}%"></div>
                                </div>
                                <div class="progress-info">
                                    <span class="amount-raised">₹${raised.toLocaleString()}</span>
                                    <span>₹${goal.toLocaleString()}</span>
                                </div>
                                <div class="progress-info">
                                    <span>${campaign.donors || 0} donors</span>
                                    <span>${campaign.daysLeft} days left</span>
                                </div>
                            </div>
                            <div class="campaign-footer">
                                <div class="campaign-actions">
                                    <button class="btn btn-outline btn-small" onclick="viewCampaign('${campaign.id}')">
                                        <i class="fas fa-eye"></i> View
                                    </button>
                                    <button class="btn btn-primary btn-small" onclick="showDonationModal('${campaign.id}')">
                                        <i class="fas fa-heart"></i> Donate
                                    </button>
                                </div>
                                ${canDelete ? `
                                    <div class="admin-actions">
                                        <button class="delete-btn" onclick="deleteCampaign('${campaign.id}')" title="Delete Campaign">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        async function renderAdminPanel() {
            if (!currentUser || !currentUser.isAdmin) return;

            const pendingContainer = document.getElementById('pendingCampaigns');
            const allContainer = document.getElementById('allCampaignsAdmin');

            try {
                const { getDocs, collection, query, where } = window.firebaseServices;
                const campaignsRef = collection(window.firebaseServices.db, 'campaigns');
                const pendingQuery = query(campaignsRef, where('status', '==', 'pending'));
                const pendingSnapshot = await getDocs(pendingQuery);

                const pendingCampaigns = [];
                pendingSnapshot.forEach((doc) => {
                    pendingCampaigns.push({ id: doc.id, ...doc.data() });
                });

                if (pendingCampaigns.length === 0) {
                    pendingContainer.innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: var(--gray);">
                            <i class="fas fa-clipboard-check"></i>
                            <h3>No Pending Approvals</h3>
                            <p>All campaigns are currently approved.</p>
                        </div>
                    `;
                } else {
                    pendingContainer.innerHTML = pendingCampaigns.map(campaign => `
                        <div class="campaign-card" style="margin-bottom: 1rem;">
                            <div class="campaign-content">
                                <h3 class="campaign-title">${campaign.title}</h3>
                                <p class="campaign-organizer">by ${campaign.organizer.name} • ${campaign.location}</p>
                                <p class="campaign-description">${campaign.description}</p>
                                <p><strong>Goal:</strong> ₹${(campaign.goal || 0).toLocaleString()}</p>
                                <p><strong>Category:</strong> ${campaign.category}</p>
                                <div style="display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap;">
                                    <button class="btn btn-primary btn-small" onclick="approveCampaign('${campaign.id}')">
                                        <i class="fas fa-check"></i> Approve
                                    </button>
                                    <button class="btn btn-danger btn-small" onclick="deleteCampaign('${campaign.id}')">
                                        <i class="fas fa-times"></i> Reject
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }

                const allSnapshot = await getDocs(campaignsRef);
                const allCampaigns = [];
                allSnapshot.forEach((doc) => {
                    allCampaigns.push({ id: doc.id, ...doc.data() });
                });

                allContainer.innerHTML = allCampaigns.map(campaign => `
                    <div class="campaign-card" style="margin-bottom: 1rem;">
                        <div class="campaign-content">
                            <h3 class="campaign-title">${campaign.title}</h3>
                            <p class="campaign-organizer">by ${campaign.organizer.name} • ${campaign.location}</p>
                            <p><strong>Status:</strong> <span style="color: ${campaign.status === 'active' ? '#28a745' : '#ffc107'}">${campaign.status.toUpperCase()}</span></p>
                            <p><strong>Raised:</strong> ₹${(campaign.raised || 0).toLocaleString()} / ₹${(campaign.goal || 0).toLocaleString()}</p>
                            <div style="display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-danger btn-small" onclick="deleteCampaign('${campaign.id}')">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error rendering admin panel:', error);
            }
        }

        function viewCampaign(campaignId) {
            const campaign = campaigns.find(c => c.id === campaignId);
            if (!campaign) return;

            currentCampaignId = campaignId;

            document.getElementById('detailCampaignImage').src = campaign.image;
            document.getElementById('detailCampaignTitle').textContent = campaign.title;
            document.getElementById('detailCampaignOrganizer').textContent = campaign.organizer.name;
            document.getElementById('detailCampaignLocation').textContent = campaign.location;
            document.getElementById('detailCampaignDate').textContent = campaign.created.toLocaleDateString();
            document.getElementById('detailCampaignStory').textContent = campaign.description;

            const raised = campaign.raised || 0;
            const goal = campaign.goal;
            const progressPercentage = Math.min((raised / goal) * 100, 100);

            document.getElementById('detailProgressFill').style.width = progressPercentage + '%';
            document.getElementById('detailAmountRaised').textContent = '₹' + raised.toLocaleString();
            document.getElementById('detailGoalAmount').textContent = '₹' + goal.toLocaleString();
            document.getElementById('detailDonorCount').textContent = (campaign.donors || 0) + ' donors';
            document.getElementById('detailDaysLeft').textContent = (campaign.daysLeft || 0) + ' days left';

            const badge = document.getElementById('detailCampaignBadge');
            badge.textContent = campaign.urgent ? 'URGENT' : 'ACTIVE';
            badge.className = 'campaign-badge' + (campaign.urgent ? ' urgent-badge' : '');

            showCampaignDetail();
        }

        function showDonationModal(campaignId) {
            const campaign = campaigns.find(c => c.id === campaignId);
            if (!campaign) return;

            currentCampaignId = campaignId;

            const raised = campaign.raised || 0;
            const goal = campaign.goal;

            document.getElementById('donationCampaignInfo').innerHTML = `
                <div style="background: var(--light); padding: 1.5rem; border-radius: 8px;">
                    <h3>${campaign.title}</h3>
                    <p style="color: var(--gray); margin: 0.5rem 0;">by ${campaign.organizer.name}</p>
                    <div style="display: flex; justify-content: space-between; margin-top: 1rem;">
                        <span><strong>Goal:</strong> ₹${goal.toLocaleString()}</span>
                        <span><strong>Raised:</strong> ₹${raised.toLocaleString()}</span>
                    </div>
                </div>
            `;

            if (currentUser) {
                document.getElementById('donorName').value = currentUser.name;
                document.getElementById('donorEmail').value = currentUser.email;
            }

            openModal('donationModal');
        }

        function setDonationAmount(amount) {
            document.getElementById('donationAmount').value = amount;
        }

        async function processDonation(amount, name, email, message) {
            const campaign = campaigns.find(c => c.id === currentCampaignId);
            if (!campaign) return;

            try {
                await completeDonation(currentCampaignId, amount, name, email, message);
                document.getElementById('donationForm').reset();
            } catch (error) {
                showNotification('Donation failed: ' + error.message, 'error');
            }
        }

        async function completeDonation(campaignId, amount, name, email, message) {
            const campaign = campaigns.find(c => c.id === campaignId);
            if (!campaign) return;

            try {
                const { updateDoc, doc } = window.firebaseServices;
                const currentRaised = campaign.raised || 0;
                const currentDonors = campaign.donors || 0;

                await updateDoc(doc(window.firebaseServices.db, 'campaigns', campaignId), {
                    raised: currentRaised + parseInt(amount),
                    donors: currentDonors + 1
                });

                await loadCampaignsFromFirebase();

                showNotification(`Thank you ${name}! Your donation of ₹${amount} has been processed successfully.`, 'success');
            } catch (error) {
                showNotification('Failed to process donation: ' + error.message, 'error');
            }
        }

        function showHomePage() {
            document.getElementById('homePage').style.display = 'block';
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('profileSection').classList.remove('active');
        }

        function showCampaignDetail() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('campaignDetail').classList.add('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('profileSection').classList.remove('active');
        }

        function showProfile() {
            if (!currentUser) {
                showNotification('Please login to view your profile.', 'warning');
                openModal('loginModal');
                return;
            }

            document.getElementById('homePage').style.display = 'none';
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('profileSection').classList.add('active');

            updateVerificationUI();
            document.getElementById('dropdownMenu').style.display = 'none';
        }

        function showAdminPanel() {
            if (!currentUser || !currentUser.isAdmin) {
                showNotification('Access denied. Admin privileges required.', 'error');
                return;
            }

            document.getElementById('homePage').style.display = 'none';
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.add('active');
            document.getElementById('profileSection').classList.remove('active');
            renderAdminPanel();
        }

        function filterCampaigns(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-filter="${category}"]`).classList.add('active');
            renderCampaigns(category);
        }

        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function toggleDropdown() {
            const dropdown = document.getElementById('dropdownMenu');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        function checkAuthAndStartCampaign() {
            if (!currentUser) {
                openModal('loginModal');
                return;
            }
            openModal('createCampaignModal');
        }

        function openDonationModal() {
            if (currentCampaignId) {
                showDonationModal(currentCampaignId);
            }
        }

        function shareCampaign() {
            if (currentCampaignId) {
                const campaignUrl = `${window.location.origin}?campaign=${currentCampaignId}`;

                if (navigator.share) {
                    navigator.share({
                        title: 'Support this campaign',
                        text: 'Help make a difference',
                        url: campaignUrl
                    });
                } else {
                    navigator.clipboard.writeText(campaignUrl).then(() => {
                        showNotification('Campaign link copied to clipboard!', 'success');
                    });
                }
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        function previewCampaignImages(event) {
            const files = Array.from(event.target.files);
            const maxFiles = 5;

            if (files.length > maxFiles) {
                showNotification(`You can only upload ${maxFiles} images maximum.`, 'warning');
                return;
            }

            campaignImages = files.slice(0, maxFiles);
            const previewContainer = document.getElementById('imagePreview');
            previewContainer.innerHTML = '';

            campaignImages.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const previewItem = document.createElement('div');
                    previewItem.className = 'image-preview-item';
                    previewItem.innerHTML = `
                        <img src="${e.target.result}" alt="Preview ${index + 1}">
                        <button type="button" class="image-preview-remove" onclick="removeCampaignImage(${index})">×</button>
                    `;
                    previewContainer.appendChild(previewItem);
                };
                reader.readAsDataURL(file);
            });
        }

        function removeCampaignImage(index) {
            campaignImages.splice(index, 1);
            const fileInput = document.getElementById('campaignImages');
            const dt = new DataTransfer();
            campaignImages.forEach(file => dt.items.add(file));
            fileInput.files = dt.files;
            previewCampaignImages({ target: fileInput });
        }

        function uploadProfilePicture() {
            document.getElementById('profilePictureInput').click();
        }

        function updateVerificationUI() {
            const statusDiv = document.getElementById('verificationStatus');

            if (userVerificationStatus === 'verified') {
                statusDiv.className = 'verification-status verified';
                statusDiv.innerHTML = `
                    <h4><i class="fas fa-check-circle"></i> Account Verified</h4>
                    <p>Your account is fully verified.</p>
                `;
            } else if (userVerificationStatus === 'pending') {
                statusDiv.className = 'verification-status pending';
                statusDiv.innerHTML = `
                    <h4><i class="fas fa-clock"></i> Verification Pending</h4>
                    <p>Your verification is under review.</p>
                `;
            } else {
                statusDiv.className = 'verification-status unverified';
                statusDiv.innerHTML = `
                    <h4><i class="fas fa-exclamation-triangle"></i> Account Verification Required</h4>
                    <p>Please complete your profile verification.</p>
                `;
            }
        }

        function showMyCampaigns() { showProfile(); }
        function showWithdrawals() { showProfile(); }
        function showMyDonations() { showProfile(); }
        function showSettings() { showProfile(); }
        function showVerificationForm() { showProfile(); }
        function editProfile() { }
        function scrollToCampaigns() { 
            document.getElementById('campaigns').scrollIntoView({ behavior: 'smooth' }); 
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadCampaignsFromFirebase();

            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });

            document.getElementById('signupForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleSignup();
            });

            document.getElementById('otpForm').addEventListener('submit', function(e) {
                e.preventDefault();
                verifyOTP();
            });

            document.getElementById('campaignForm').addEventListener('submit', function(e) {
                e.preventDefault();
                createCampaign();
            });

            document.getElementById('donationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const amount = document.getElementById('donationAmount').value;
                const name = document.getElementById('donorName').value;
                const email = document.getElementById('donorEmail').value;
                const message = document.getElementById('donorMessage').value;

                processDonation(amount, name, email, message);
            });

            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.dataset.filter;
                    filterCampaigns(filter);
                });
            });

            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });

            document.addEventListener('click', function(e) {
                if (!e.target.closest('.user-menu')) {
                    document.getElementById('dropdownMenu').style.display = 'none';
                }
            });

            if (window.firebaseServices) {
                window.firebaseServices.onAuthStateChanged(window.firebaseServices.auth, (user) => {
                    if (user && !currentUser) {
                        const isAdmin = user.email === 'vishuu7306@gmail.com';
                        currentUser = {
                            uid: user.uid,
                            name: user.displayName || user.email.split('@')[0],
                            email: user.email,
                            phone: '',
                            isAdmin: isAdmin
                        };
                        loadUserProfile();
                        updateAuthUI();
                    } else if (!user && currentUser) {
                        currentUser = null;
                        updateAuthUI();
                    }
                });
            }
        });
    </script>
</body>
</html>