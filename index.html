
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flapping Bird - India's Most Trusted Crowdfunding Platform</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00b386;
            --primary-dark: #009970;
            --secondary: #ff4757;
            --accent: #3742fa;
            --success: #2ed573;
            --warning: #ffa502;
            --danger: #ff3838;
            --dark: #2f3542;
            --light: #f1f2f6;
            --gray: #57606f;
            --white: #ffffff;
            --border: #ddd;
            --shadow: rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: #fafbfc;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: var(--white);
            box-shadow: 0 2px 10px var(--shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--dark);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .auth-section {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: var(--white);
        }

        .btn-secondary {
            background: var(--secondary);
            color: var(--white);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-large {
            padding: 16px 32px;
            font-size: 1.1rem;
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .btn-warning {
            background: var(--warning);
            color: var(--white);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: var(--white);
            padding: 120px 0 80px;
            text-align: center;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.95;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Trust Section */
        .trust-section {
            background: var(--white);
            padding: 60px 0;
            text-align: center;
        }

        .trust-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .stat-item {
            padding: 2rem;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--gray);
            font-weight: 500;
        }

        /* Categories Section */
        .categories-section {
            padding: 80px 0;
            background: var(--light);
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .category-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 20px var(--shadow);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-8px);
        }

        .category-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: var(--white);
        }

        /* Campaigns Section */
        .campaigns-section {
            padding: 80px 0;
            background: var(--white);
        }

        .campaigns-filter {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            border: 2px solid var(--border);
            background: var(--white);
            color: var(--gray);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active,
        .filter-btn:hover {
            border-color: var(--primary);
            background: var(--primary);
            color: var(--white);
        }

        .campaigns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .campaign-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 25px var(--shadow);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .campaign-card:hover {
            transform: translateY(-5px);
        }

        .campaign-image-container {
            position: relative;
            width: 100%;
            height: 220px;
            overflow: hidden;
        }

        .campaign-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .campaign-card:hover .campaign-image {
            transform: scale(1.05);
        }

        .campaign-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--primary);
            color: var(--white);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        .urgent-badge {
            background: var(--danger);
        }

        .campaign-content {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .campaign-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
            line-height: 1.4;
        }

        .campaign-organizer {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .campaign-description {
            color: var(--gray);
            margin-bottom: 1.5rem;
            flex: 1;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .campaign-progress {
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--success));
            border-radius: 4px;
            transition: width 0.3s;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        .amount-raised {
            font-weight: 600;
            color: var(--primary);
        }

        .campaign-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
            gap: 1rem;
        }

        .campaign-actions {
            display: flex;
            gap: 0.5rem;
            flex: 1;
        }

        .admin-actions {
            display: flex;
            gap: 0.5rem;
        }

        .delete-btn {
            background: var(--danger);
            color: var(--white);
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        /* Image Preview Styles */
        .image-preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .image-preview-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid var(--border);
        }

        .image-preview-item img {
            width: 100%;
            height: 80px;
            object-fit: cover;
        }

        .image-preview-remove {
            position: absolute;
            top: 4px;
            right: 4px;
            background: var(--danger);
            color: var(--white);
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 10px;
            cursor: pointer;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: var(--white);
            margin: 2% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 2rem;
        }

        .close {
            color: var(--gray);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: var(--danger);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* User Profile Dropdown */
        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 600;
            overflow: hidden;
            position: relative;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--white);
            box-shadow: 0 10px 30px var(--shadow);
            border-radius: 8px;
            min-width: 200px;
            padding: 0.5rem 0;
            display: none;
        }

        .dropdown-item {
            padding: 0.75rem 1rem;
            color: var(--dark);
            text-decoration: none;
            display: block;
            transition: background 0.3s;
        }

        .dropdown-item:hover {
            background: var(--light);
        }

        /* Profile Section */
        .profile-section {
            display: none;
            padding: 120px 0 80px;
            min-height: 100vh;
            background: var(--light);
        }

        .profile-section.active {
            display: block;
        }

        .profile-card {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 6px 25px var(--shadow);
            margin-bottom: 2rem;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border);
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 600;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-overlay {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .profile-info h2 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .profile-info p {
            color: var(--gray);
            margin-bottom: 0.25rem;
        }

        /* Verification Status */
        .verification-status {
            background: #fff3e0;
            border: 1px solid #f57c00;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .verification-status.verified {
            background: #e8f5e8;
            border-color: #2d5016;
        }

        .verification-status.pending {
            background: #fff3e0;
            border-color: #f57c00;
        }

        .verification-status.unverified {
            background: #ffebee;
            border-color: #d32f2f;
        }

        .verification-form {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 6px 25px var(--shadow);
            margin-bottom: 2rem;
        }

        .document-upload {
            border: 2px dashed var(--border);
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .document-upload:hover {
            border-color: var(--primary);
        }

        .document-upload.has-file {
            border-color: var(--success);
            background: #e8f5e8;
        }

        /* Campaign Detail Page */
        .campaign-detail {
            display: none;
            padding: 120px 0 80px;
            min-height: 100vh;
            background: var(--light);
        }

        .campaign-detail.active {
            display: block;
        }

        .campaign-detail-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 25px var(--shadow);
            margin-bottom: 2rem;
        }

        .campaign-hero {
            position: relative;
            height: 400px;
            overflow: hidden;
        }

        .campaign-hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .campaign-info {
            padding: 2rem;
        }

        .campaign-detail-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .campaign-meta {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
            color: var(--gray);
        }

        .campaign-story {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--dark);
            margin-bottom: 2rem;
        }

        .donors-section {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 6px 25px var(--shadow);
        }

        .donor-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .donor-info h4 {
            margin-bottom: 0.25rem;
        }

        .donor-amount {
            font-weight: 600;
            color: var(--primary);
        }

        /* Footer */
        .footer {
            background: var(--dark);
            color: var(--white);
            padding: 3rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .footer-section p {
            color: #adb5bd;
            margin-bottom: 1rem;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .footer-section a {
            color: #adb5bd;
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
            transition: color 0.3s;
            padding: 0.25rem 0;
            font-size: 0.95rem;
        }

        .footer-section a:hover {
            color: var(--white);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            color: var(--white);
            transition: background 0.3s;
        }

        .social-links a:hover {
            background: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #adb5bd;
            font-size: 0.9rem;
        }

        .copyright p {
            margin-bottom: 0.5rem;
        }

        /* Admin Badge */
        .admin-badge {
            background: var(--warning);
            color: var(--white);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 1rem;
        }

        /* Success/Error Messages */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: var(--white);
            font-weight: 600;
            z-index: 3000;
            transform: translateX(100%);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success);
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.warning {
            background: var(--warning);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            margin-bottom: 1rem;
        }

        .empty-state p {
            margin-bottom: 2rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .btn-large {
                width: 100%;
                margin-bottom: 1rem;
            }

            .campaign-actions {
                flex-direction: column;
            }

            .campaign-detail-title {
                font-size: 2rem;
            }

            .campaign-meta {
                flex-direction: column;
                gap: 1rem;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="container">
            <div class="nav">
                <a href="#" class="logo" onclick="showHomePage()">
                    <i class="fas fa-hands-helping"></i>
                    Flapping Bird
                </a>
                
                <ul class="nav-links">
                    <li><a href="#campaigns" onclick="showHomePage()">Browse Campaigns</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="#success-stories">Success Stories</a></li>
                    <li><a href="#about">About</a></li>
                </ul>
                
                <div class="auth-section" id="authSection">
                    <button class="btn btn-outline" onclick="openModal('loginModal')">Login</button>
                    <button class="btn btn-primary" onclick="openModal('signupModal')">Sign Up</button>
                </div>
                
                <!-- User Menu (hidden by default) -->
                <div class="user-menu" id="userMenu" style="display: none;">
                    <div class="user-avatar" onclick="toggleDropdown()" id="userAvatarNav">
                        <span id="userInitials">U</span>
                    </div>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="#" class="dropdown-item" onclick="showProfile()"><i class="fas fa-user"></i> Profile</a>
                        <a href="#" class="dropdown-item" onclick="showMyCampaigns()"><i class="fas fa-heart"></i> My Campaigns</a>
                        <a href="#" class="dropdown-item" onclick="showWithdrawals()"><i class="fas fa-wallet"></i> Withdrawals</a>
                        <a href="#" class="dropdown-item" onclick="showMyDonations()"><i class="fas fa-donate"></i> My Donations</a>
                        <a href="#" class="dropdown-item" onclick="showSettings()"><i class="fas fa-cog"></i> Settings</a>
                        <div id="adminMenuItems" style="display: none;">
                            <hr style="margin: 0.5rem 0;">
                            <a href="#" class="dropdown-item" onclick="showAdminPanel()"><i class="fas fa-shield-alt"></i> Admin Panel</a>
                        </div>
                        <hr style="margin: 0.5rem 0;">
                        <a href="#" class="dropdown-item" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Home Page -->
    <div id="homePage">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h1>India's Most Trusted Crowdfunding Platform</h1>
                <p>Join millions of Indians who have raised funds for medical emergencies, education, disasters, and social causes</p>
                <div class="hero-buttons">
                    <button class="btn btn-secondary btn-large" onclick="checkAuthAndStartCampaign()">
                        <i class="fas fa-plus"></i> Start Fundraiser
                    </button>
                    <a href="#campaigns" class="btn btn-outline btn-large">
                        <i class="fas fa-search"></i> Browse Campaigns
                    </a>
                </div>
            </div>
        </section>

        <!-- Trust Section -->
        <section class="trust-section">
            <div class="container">
                <h2>Trusted by Millions Across India</h2>
                <div class="trust-stats">
                    <div class="stat-item">
                        <div class="stat-number">₹250+ Cr</div>
                        <div class="stat-label">Funds Raised</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1.2L+</div>
                        <div class="stat-label">Successful Campaigns</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">15L+</div>
                        <div class="stat-label">Happy Donors</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">50+</div>
                        <div class="stat-label">Cities Covered</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="categories-section" id="categories">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Fundraise For Any Cause</h2>
                    <p class="section-subtitle">From medical emergencies to education, we support all genuine causes</p>
                </div>
                <div class="categories-grid">
                    <div class="category-card" onclick="filterCampaigns('medical')">
                        <div class="category-icon">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <h3>Medical Emergencies</h3>
                        <p>Help patients get life-saving treatments and surgeries</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('education')">
                        <div class="category-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Education</h3>
                        <p>Support students with tuition fees, books, and educational expenses. Students can fundraise for college fees, textbooks, and study materials.</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('disaster')">
                        <div class="category-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3>Disaster Relief</h3>
                        <p>Aid victims of natural disasters and emergencies</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('debt')">
                        <div class="category-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h3>Debt Relief</h3>
                        <p>Help families overcome financial burdens</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('animal')">
                        <div class="category-icon">
                            <i class="fas fa-paw"></i>
                        </div>
                        <h3>Animal Welfare</h3>
                        <p>Support rescue and care for animals in need</p>
                    </div>
                    <div class="category-card" onclick="filterCampaigns('social')">
                        <div class="category-icon">
                            <i class="fas fa-hands-helping"></i>
                        </div>
                        <h3>Social Causes</h3>
                        <p>Make a difference in your community</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Success Stories Section -->
        <section class="categories-section" id="success-stories" style="background: var(--white);">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Success Stories That Inspire</h2>
                    <p class="section-subtitle">Real people, real impact - see how your donations change lives</p>
                </div>
                <div class="categories-grid">
                    <div class="category-card" style="background: linear-gradient(135deg, #e8f5e8, #f0fff0); border: 1px solid var(--success);">
                        <div class="category-icon" style="background: linear-gradient(135deg, var(--success), #2d5016);">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>Priya's Heart Surgery - ₹12 Lakhs Raised</h3>
                        <p>"Thanks to 847 generous donors, our 6-year-old daughter got her life-saving heart surgery. She's now healthy and back to school. Forever grateful!" - Rajesh & Meera</p>
                        <small style="color: var(--success); font-weight: 600;">✓ Campaign Completed Successfully</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #e3f2fd, #f3e5f5); border: 1px solid var(--accent);">
                        <div class="category-icon" style="background: linear-gradient(135deg, var(--accent), #1976d2);">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Arjun's Engineering Dream - ₹4 Lakhs Raised</h3>
                        <p>"A village boy's dream to become an engineer came true. Now I'm in my final year at IIT Delhi, all thanks to the kindness of 312 supporters who believed in education."</p>
                        <small style="color: var(--accent); font-weight: 600;">✓ Graduate in 2024</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #fff3e0, #ffeaa7); border: 1px solid var(--warning);">
                        <div class="category-icon" style="background: linear-gradient(135deg, var(--warning), #f57c00);">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3>Kerala Flood Relief - ₹25 Lakhs Raised</h3>
                        <p>"After losing everything in floods, 1,200+ donors helped us rebuild 45 homes. Families are back to their normal lives with dignity and hope restored."</p>
                        <small style="color: var(--warning); font-weight: 600;">✓ 45 Families Rehabilitated</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #ffebee, #fce4ec); border: 1px solid var(--secondary);">
                        <div class="category-icon" style="background: linear-gradient(135deg, var(--secondary), #c62828);">
                            <i class="fas fa-paw"></i>
                        </div>
                        <h3>Shelter for 200 Stray Dogs - ₹8 Lakhs Raised</h3>
                        <p>"Our animal shelter was about to close, but 567 animal lovers came together to save it. Now 200+ rescued dogs have a safe home and medical care."</p>
                        <small style="color: var(--secondary); font-weight: 600;">✓ Shelter Operating Successfully</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #f3e5f5, #e8eaf6); border: 1px solid #9c27b0;">
                        <div class="category-icon" style="background: linear-gradient(135deg, #9c27b0, #6a1b9a);">
                            <i class="fas fa-hand-holding-medical"></i>
                        </div>
                        <h3>Cancer Treatment for Grandmother - ₹15 Lakhs Raised</h3>
                        <p>"Dadi defeated cancer at 78! The treatment cost seemed impossible, but 923 kind souls made the miracle happen. She's cancer-free for 2 years now."</p>
                        <small style="color: #9c27b0; font-weight: 600;">✓ Cancer-Free for 2 Years</small>
                    </div>
                    <div class="category-card" style="background: linear-gradient(135deg, #e0f2f1, #e8f5e8); border: 1px solid #00796b;">
                        <div class="category-icon" style="background: linear-gradient(135deg, #00796b, #004d40);">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <h3>Farmer Debt Relief - ₹6 Lakhs Raised</h3>
                        <p>"After three failed crops, we thought we'd lose our ancestral land. But 234 supporters helped clear our debt. This season's harvest was our best ever!"</p>
                        <small style="color: #00796b; font-weight: 600;">✓ Farm Saved, Family Secure</small>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 3rem;">
                    <p style="font-size: 1.2rem; color: var(--gray); margin-bottom: 2rem;">Your donation could be the next success story. Every contribution creates ripples of hope.</p>
                    <button class="btn btn-primary btn-large" onclick="scrollToCampaigns()">
                        <i class="fas fa-heart"></i> Be Part of a Success Story
                    </button>
                </div>
            </div>
        </section>

        <!-- Campaigns Section -->
        <section class="campaigns-section" id="campaigns">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Featured Campaigns</h2>
                    <p class="section-subtitle">Support these urgent campaigns that need your help today</p>
                </div>
                
                <div class="campaigns-filter">
                    <button class="filter-btn active" data-filter="all">All Campaigns</button>
                    <button class="filter-btn" data-filter="medical">Medical</button>
                    <button class="filter-btn" data-filter="education">Education</button>
                    <button class="filter-btn" data-filter="disaster">Emergency</button>
                    <button class="filter-btn" data-filter="debt">Debt Relief</button>
                    <button class="filter-btn" data-filter="animal">Animals</button>
                </div>
                
                <div class="campaigns-grid" id="campaignsGrid">
                    <!-- Campaigns will be loaded here -->
                </div>
            </div>
        </section>
    </div>

    <!-- Profile Section -->
    <section class="profile-section" id="profileSection">
        <div class="container">
            <button class="btn btn-outline" onclick="showHomePage()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Home
            </button>
            
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar" onclick="uploadProfilePicture()">
                        <span id="profileInitials">U</span>
                        <div class="upload-overlay">
                            <i class="fas fa-camera" style="color: white; font-size: 12px;"></i>
                        </div>
                    </div>
                    <input type="file" id="profilePictureInput" accept="image/*" style="display: none;" onchange="handleProfilePictureUpload(event)">
                    <div class="profile-info">
                        <h2 id="profileName">User Name</h2>
                        <p id="profileEmail">user@example.com</p>
                        <p id="profilePhone">+91-9876543210</p>
                        <button class="btn btn-outline btn-small" onclick="editProfile()">
                            <i class="fas fa-edit"></i> Edit Profile
                        </button>
                    </div>
                </div>

                <!-- Verification Status -->
                <div id="verificationStatus" class="verification-status unverified">
                    <h4><i class="fas fa-exclamation-triangle"></i> Account Verification Required</h4>
                    <p>Please complete your profile verification to start fundraising and withdraw funds.</p>
                    <button class="btn btn-warning btn-small" onclick="showVerificationForm()">
                        <i class="fas fa-shield-alt"></i> Complete Verification
                    </button>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2><i class="fas fa-heart"></i> My Campaigns</h2>
                    <button class="btn btn-primary" onclick="checkAuthAndStartCampaign()">
                        <i class="fas fa-plus"></i> Create New Campaign
                    </button>
                </div>
                
                <div id="userCampaignsList">
                    <div class="empty-state">
                        <i class="fas fa-heart-broken"></i>
                        <h3>No Campaigns Yet</h3>
                        <p>You haven't created any campaigns yet. Start your first fundraiser to make a difference!</p>
                        <button class="btn btn-primary" onclick="checkAuthAndStartCampaign()">
                            <i class="fas fa-plus"></i> Create Your First Campaign
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Verification Section -->
    <section class="profile-section" id="verificationSection">
        <div class="container">
            <button class="btn btn-outline" onclick="showProfile()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Profile
            </button>
            
            <div class="verification-form">
                <h2><i class="fas fa-shield-alt"></i> Complete Account Verification</h2>
                <p style="color: var(--gray); margin-bottom: 2rem;">Verify your identity to start fundraising and enable fund withdrawals. All information is encrypted and secure.</p>
                
                <form id="verificationForm">
                    <div class="form-group">
                        <label class="form-label">Aadhaar Number</label>
                        <input type="text" class="form-control" id="aadhaarNumber" placeholder="Enter 12-digit Aadhaar number" maxlength="12" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Upload Aadhaar Card</label>
                        <div class="document-upload" onclick="document.getElementById('aadhaarUpload').click()">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: var(--gray); margin-bottom: 1rem;"></i>
                            <p>Click to upload Aadhaar card image</p>
                            <small>JPG, PNG or PDF (Max 5MB)</small>
                        </div>
                        <input type="file" id="aadhaarUpload" accept="image/*,.pdf" style="display: none;" onchange="handleDocumentUpload(this, 'aadhaar')">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">PAN Number</label>
                        <input type="text" class="form-control" id="panNumber" placeholder="Enter PAN number" maxlength="10" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Upload PAN Card</label>
                        <div class="document-upload" onclick="document.getElementById('panUpload').click()">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: var(--gray); margin-bottom: 1rem;"></i>
                            <p>Click to upload PAN card image</p>
                            <small>JPG, PNG or PDF (Max 5MB)</small>
                        </div>
                        <input type="file" id="panUpload" accept="image/*,.pdf" style="display: none;" onchange="handleDocumentUpload(this, 'pan')">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Bank Account Number</label>
                        <input type="text" class="form-control" id="bankAccount" placeholder="Enter bank account number" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">IFSC Code</label>
                        <input type="text" class="form-control" id="ifscCode" placeholder="Enter IFSC code" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Bank Name</label>
                        <input type="text" class="form-control" id="bankName" placeholder="Enter bank name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Account Holder Name</label>
                        <input type="text" class="form-control" id="accountHolderName" placeholder="Enter account holder name" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-check"></i> Submit for Verification
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Withdrawals Section -->
    <section class="profile-section" id="withdrawalsSection">
        <div class="container">
            <button class="btn btn-outline" onclick="showProfile()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Profile
            </button>
            
            <div class="profile-card">
                <h2><i class="fas fa-wallet"></i> Fund Withdrawals</h2>
                
                <div id="withdrawalNotice" class="verification-status unverified">
                    <h4><i class="fas fa-exclamation-triangle"></i> Verification Required</h4>
                    <p>Complete your account verification to enable withdrawals. All withdrawals are subject to verification and require proper documentation.</p>
                    <button class="btn btn-warning btn-small" onclick="showVerificationForm()">
                        <i class="fas fa-shield-alt"></i> Complete Verification
                    </button>
                </div>

                <div id="withdrawalContent" style="display: none;">
                    <div style="background: #fff3e0; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #f57c00;">
                        <h4 style="margin: 0 0 1rem 0; color: #f57c00;">Important: Withdrawal Process</h4>
                        <ul style="margin: 0; padding-left: 1.5rem; color: #f57c00;">
                            <li>All withdrawals are subject to verification</li>
                            <li>Upload bills/receipts when requesting withdrawals</li>
                            <li>Funds will be transferred to your verified bank account</li>
                            <li>Platform fee: 5% of withdrawn amount</li>
                            <li>Minimum withdrawal amount: ₹1,000</li>
                        </ul>
                    </div>

                    <button class="btn btn-primary" onclick="openModal('withdrawalModal')">
                        <i class="fas fa-money-bill"></i> Request Withdrawal
                    </button>

                    <div style="margin-top: 2rem;">
                        <h3>Withdrawal History</h3>
                        <div id="withdrawalHistory">
                            <div class="empty-state">
                                <i class="fas fa-history"></i>
                                <h3>No Withdrawals Yet</h3>
                                <p>Your withdrawal history will appear here.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- My Donations Section -->
    <section class="profile-section" id="myDonationsSection">
        <div class="container">
            <button class="btn btn-outline" onclick="showProfile()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Profile
            </button>
            
            <div class="profile-card">
                <h2><i class="fas fa-donate"></i> My Donations</h2>
                
                <div id="userDonationsList">
                    <!-- Donations will be loaded here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Settings Section -->
    <section class="profile-section" id="settingsSection">
        <div class="container">
            <button class="btn btn-outline" onclick="showProfile()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Profile
            </button>
            
            <div id="settingsContent">
                <!-- Settings content will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Campaign Detail Page -->
    <div class="campaign-detail" id="campaignDetail">
        <div class="container">
            <button class="btn btn-outline" onclick="showHomePage()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Campaigns
            </button>
            
            <div class="campaign-detail-card">
                <div class="campaign-hero">
                    <img id="detailCampaignImage" src="" alt="Campaign Image">
                    <div class="campaign-badge" id="detailCampaignBadge">ACTIVE</div>
                </div>
                
                <div class="campaign-info">
                    <h1 class="campaign-detail-title" id="detailCampaignTitle"></h1>
                    
                    <div class="campaign-meta">
                        <div><i class="fas fa-user"></i> <span id="detailCampaignOrganizer"></span></div>
                        <div><i class="fas fa-map-marker-alt"></i> <span id="detailCampaignLocation"></span></div>
                        <div><i class="fas fa-calendar"></i> <span id="detailCampaignDate"></span></div>
                    </div>
                    
                    <div class="campaign-progress" style="margin-bottom: 2rem;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="detailProgressFill"></div>
                        </div>
                        <div class="progress-info">
                            <span class="amount-raised" id="detailAmountRaised">₹0</span>
                            <span id="detailGoalAmount">₹0</span>
                        </div>
                        <div class="progress-info">
                            <span id="detailDonorCount">0 donors</span>
                            <span id="detailDaysLeft">0 days left</span>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                        <button class="btn btn-primary btn-large" onclick="openDonationModal()" style="flex: 1;">
                            <i class="fas fa-heart"></i> Donate Now
                        </button>
                        <button class="btn btn-outline" onclick="shareCampaign()">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                    </div>
                    
                    <div class="campaign-story" id="detailCampaignStory"></div>
                </div>
            </div>
            
            <div class="donors-section">
                <h2 style="margin-bottom: 1.5rem;"><i class="fas fa-users"></i> Recent Donors</h2>
                <div id="donorsList">
                    <!-- Donors will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="campaign-detail" id="adminPanel">
        <div class="container">
            <button class="btn btn-outline" onclick="showHomePage()" style="margin-bottom: 2rem;">
                <i class="fas fa-arrow-left"></i> Back to Home
            </button>
            
            <div class="campaign-detail-card">
                <div class="campaign-info">
                    <h1 class="campaign-detail-title">
                        <i class="fas fa-shield-alt"></i> Admin Panel
                        <span class="admin-badge">ADMIN</span>
                    </h1>
                    
                    <div style="margin-bottom: 2rem;">
                        <h3>Pending Campaign Approvals</h3>
                        <div id="pendingCampaigns">
                            <!-- Pending campaigns will be loaded here -->
                        </div>
                    </div>
                    
                    <div>
                        <h3>All Campaigns</h3>
                        <div id="allCampaignsAdmin">
                            <!-- All campaigns will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-sign-in-alt"></i> Login to Your Account</h2>
                <span class="close" onclick="closeModal('loginModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                </form>
                <p style="text-align: center; margin-top: 1rem;">
                    Don't have an account? <a href="#" onclick="closeModal('loginModal'); openModal('signupModal')">Sign up</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-user-plus"></i> Create Your Account</h2>
                <span class="close" onclick="closeModal('signupModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="signupForm">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="signupName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="signupEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="signupPhone" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="signupPassword" required>
                        <small style="color: #666;">Minimum 6 characters</small>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Send OTP</button>
                </form>
                <p style="text-align: center; margin-top: 1rem;">
                    Already have an account? <a href="#" onclick="closeModal('signupModal'); openModal('loginModal')">Login</a>
                </p>
            </div>
        </div>
    </div>

    <!-- OTP Verification Modal -->
    <div id="otpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-shield-alt"></i> Verify Your Email</h2>
                <span class="close" onclick="closeModal('otpModal'); openModal('signupModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div style="background: var(--light); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <i class="fas fa-envelope" style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;"></i>
                        <p>We've sent a 6-digit OTP to:</p>
                        <p style="font-weight: 600; color: var(--primary);" id="otpEmail">user@example.com</p>
                        <p style="color: var(--gray); font-size: 0.9rem;">Please check your inbox (and spam folder) for the verification code.</p>
                        
                        <!-- Email instructions -->
                        <div style="background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 1rem; margin-top: 1rem;">
                            <p style="color: #2e7d32; font-weight: 600; margin: 0;"><i class="fas fa-envelope"></i> Check Your Email</p>
                            <p style="color: #2e7d32; font-size: 0.9rem; margin: 0.5rem 0 0 0;">The OTP has been sent to your email address. Please check your spam folder if you don't see it in your inbox.</p>
                        </div>
                    </div>
                </div>
                
                <form id="otpForm">
                    <div class="form-group">
                        <label class="form-label">Enter 6-Digit OTP</label>
                        <input type="text" class="form-control" id="otpCode" placeholder="Enter OTP" maxlength="6" style="text-align: center; font-size: 1.5rem; letter-spacing: 0.5rem;" required>
                    </div>
                    
                    <div style="text-align: center; margin: 1rem 0;">
                        <p style="color: var(--gray);">
                            Time remaining: <span id="otpTimer" style="font-weight: 600; color: var(--primary);">15:00</span>
                        </p>
                        <button type="button" id="resendOTP" class="btn btn-outline btn-small" onclick="resendOTP()" style="display: none;">
                            <i class="fas fa-redo"></i> Resend OTP
                        </button>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-check"></i> Verify & Create Account
                    </button>
                </form>
                
                <p style="text-align: center; margin-top: 1.5rem; color: var(--gray); font-size: 0.9rem;">
                    Didn't receive the email? Check your spam folder or click resend after the timer expires.
                </p>
            </div>
        </div>
    </div>

    <!-- Campaign Creation Modal -->
    <div id="createCampaignModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-plus-circle"></i> Start Your Fundraiser</h2>
                <span class="close" onclick="closeModal('createCampaignModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="campaignForm">
                    <div class="form-group">
                        <label class="form-label">Campaign Title</label>
                        <input type="text" class="form-control" name="title" placeholder="e.g., Help Priya Fight Cancer" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-control" name="category" required>
                            <option value="">Select Category</option>
                            <option value="medical">Medical Emergency</option>
                            <option value="education">Education</option>
                            <option value="disaster">Disaster Relief</option>
                            <option value="debt">Debt Relief</option>
                            <option value="animal">Animal Welfare</option>
                            <option value="social">Social Cause</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Funding Goal (₹)</label>
                        <input type="number" class="form-control" name="goal" min="10000" placeholder="Enter amount needed" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <input type="text" class="form-control" name="location" placeholder="City, State" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Campaign Duration</label>
                        <select class="form-control" name="duration" required>
                            <option value="">Select Duration</option>
                            <option value="30">30 days</option>
                            <option value="60">60 days</option>
                            <option value="90">90 days</option>
                            <option value="ongoing">Keep running until goal is met</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Your Story</label>
                        <textarea class="form-control" name="description" rows="6" placeholder="Tell people why you're raising funds. Include specific details about how the money will be used." required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Upload Campaign Images (Maximum 5)</label>
                        <input type="file" id="campaignImages" class="form-control" accept="image/*" multiple onchange="previewCampaignImages(event)">
                        <small style="color: #666; display: block; margin-top: 0.5rem;">Upload clear photos that show the situation. Medical campaigns should include hospital documents.</small>
                        <div id="imagePreview" class="image-preview-container"></div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-rocket"></i> Create Campaign
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Withdrawal Modal -->
    <div id="withdrawalModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-money-bill"></i> Request Withdrawal</h2>
                <span class="close" onclick="closeModal('withdrawalModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="withdrawalForm">
                    <div class="form-group">
                        <label class="form-label">Select Campaign</label>
                        <select class="form-control" id="withdrawalCampaign" required>
                            <option value="">Select campaign to withdraw from</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Withdrawal Amount (₹)</label>
                        <input type="number" class="form-control" id="withdrawalAmount" min="1000" placeholder="Minimum ₹1,000" required>
                        <small style="color: #666;">Platform fee: 5% will be deducted</small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Purpose of Withdrawal</label>
                        <textarea class="form-control" id="withdrawalPurpose" placeholder="Describe how the funds will be used..." required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Upload Supporting Documents</label>
                        <input type="file" id="withdrawalDocuments" class="form-control" accept="image/*,.pdf" multiple>
                        <small style="color: #666;">Upload bills, receipts, or medical reports (Max 5 files)</small>
                    </div>

                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-send"></i> Submit Withdrawal Request
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Donation Modal -->
    <div id="donationModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-heart"></i> Make a Donation</h2>
                <span class="close" onclick="closeModal('donationModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="donationCampaignInfo" style="margin-bottom: 2rem;"></div>
                
                <form id="donationForm">
                    <div class="form-group">
                        <label class="form-label">Donation Amount (₹)</label>
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                            <button type="button" class="btn btn-outline btn-small" onclick="setDonationAmount(500)">₹500</button>
                            <button type="button" class="btn btn-outline btn-small" onclick="setDonationAmount(1000)">₹1,000</button>
                            <button type="button" class="btn btn-outline btn-small" onclick="setDonationAmount(2500)">₹2,500</button>
                            <button type="button" class="btn btn-outline btn-small" onclick="setDonationAmount(5000)">₹5,000</button>
                        </div>
                        <input type="number" class="form-control" id="donationAmount" placeholder="Enter custom amount" min="100" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" class="form-control" id="donorName" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Your Email</label>
                        <input type="email" class="form-control" id="donorEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Message (Optional)</label>
                        <textarea class="form-control" id="donorMessage" placeholder="Write an encouraging message..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-heart"></i> Donate Now
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Campaign Edit Modal -->
    <div id="adminEditModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2><i class="fas fa-shield-alt"></i> Admin: Edit Campaign</h2>
                <span class="close" onclick="closeModal('adminEditModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="adminEditForm">
                    <div class="form-group">
                        <label class="form-label">Campaign Title</label>
                        <input type="text" class="form-control" id="adminEditTitle" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Campaign Description</label>
                        <textarea class="form-control" id="adminEditDescription" rows="4" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Funding Goal (₹)</label>
                        <input type="number" class="form-control" id="adminEditGoal" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Campaign Image URL</label>
                        <input type="url" class="form-control" id="adminEditImage" placeholder="https://example.com/image.jpg">
                        <small style="color: #666;">Enter a valid image URL for the campaign cover photo</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Payment Link (UPI/Bank/Razorpay)</label>
                        <input type="text" class="form-control" id="adminEditPaymentLink" placeholder="e.g., upi://pay?pa=example@okaxis&pn=Name&am=100">
                        <small style="color: #666;">Add payment links for easy donations (UPI, bank transfer, payment gateway)</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Campaign Status</label>
                        <select class="form-control" id="adminEditStatus">
                            <option value="pending">Pending Approval</option>
                            <option value="active">Active</option>
                            <option value="completed">Completed</option>
                            <option value="suspended">Suspended</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About Flapping Bird</h3>
                    <p>India's most trusted crowdfunding platform helping millions raise funds for medical emergencies, education, and social causes. We believe in the power of collective giving to create positive change in society.</p>
                    <div class="social-links">
                        <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Campaigns</h3>
                    <a href="#" onclick="filterCampaigns('medical')">Medical Fundraising</a>
                    <a href="#" onclick="filterCampaigns('education')">Education Fundraising</a>
                    <a href="#" onclick="filterCampaigns('disaster')">Emergency Relief</a>
                    <a href="#" onclick="filterCampaigns('animal')">Animal Welfare</a>
                    <a href="#success-stories" onclick="document.getElementById('success-stories').scrollIntoView({behavior: 'smooth'})">Success Stories</a>
                </div>
                
                <div class="footer-section">
                    <h3>Support</h3>
                    <a href="#" onclick="openInfoModal('howItWorks')">How It Works</a>
                    <a href="#" onclick="openInfoModal('safety')">Safety & Security</a>
                    <a href="#" onclick="openInfoModal('pricing')">Pricing & Fees</a>
                    <a href="#" onclick="openInfoModal('help')">Help Center</a>
                    <a href="#" onclick="openInfoModal('contact')">Contact Support</a>
                </div>
                
                <div class="footer-section">
                    <h3>Legal</h3>
                    <a href="#" onclick="openInfoModal('terms')">Terms of Service</a>
                    <a href="#" onclick="openInfoModal('privacy')">Privacy Policy</a>
                    <a href="#" onclick="openInfoModal('refund')">Refund Policy</a>
                    <a href="#" onclick="openInfoModal('guidelines')">Campaign Guidelines</a>
                    <a href="#" onclick="openInfoModal('tax')">Tax Benefits</a>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2024 Flapping Bird Technologies Pvt Ltd. All rights reserved. | CIN: U74999MH2024PTC123456</p>
                <p>Registered Office: 123 Tech Hub, Sector 18, Gurugram, Haryana 122015 | Support: +91-124-4567890 | Email: support@flappingbird.in</p>
            </div>
        </div>
    </footer>

    <!-- Info Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 id="infoModalTitle"><i id="infoModalIcon"></i> Information</h2>
                <span class="close" onclick="closeModal('infoModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="infoModalBody">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            emailjs.init("9xuGthPm0Uw3wvgiX"); // Your public key
        })();
    </script>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase Configuration
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
        import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, getDoc, getDocs, query, where, orderBy, limit, onSnapshot } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js';
        import { getAnalytics } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDvi5Arr_qEJv5UsocpIIrOBmxYcbCoN2E",
            authDomain: "flapping-bird-f9a21.firebaseapp.com",
            projectId: "flapping-bird-f9a21",
            storageBucket: "flapping-bird-f9a21.firebasestorage.app",
            messagingSenderId: "501160247273",
            appId: "1:501160247273:web:eec35ea17b64aa7dbbd578",
            measurementId: "G-SDPQVPP3TD"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const storage = getStorage(app);
        const analytics = getAnalytics(app);

        // Make Firebase services available globally
        window.firebaseServices = { db, auth, storage, addDoc, collection, updateDoc, doc, getDocs, query, where, orderBy, limit, onSnapshot, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, ref, uploadBytes, getDownloadURL, deleteDoc };
    </script>

    <script>
        // Global variables
        let currentUser = null;
        let currentCampaignId = null;
        let campaigns = [];
        let allCampaigns = [];
        let campaignImages = [];
        let userVerificationStatus = 'unverified'; // unverified, pending, verified

        // Initialize with sample campaigns
        function initializeSampleCampaigns() {
            campaigns = [
                {
                    id: 'camp_001',
                    title: 'Help 4-Year-Old Aarav Fight Leukemia',
                    description: 'Little Aarav was diagnosed with Acute Lymphoblastic Leukemia at just 4 years old. His parents, Ramesh and Priya, are daily wage workers from Nagpur who have exhausted all their savings. The treatment requires immediate chemotherapy sessions costing ₹15 lakhs. The doctors at Tata Memorial Hospital have given hope that with proper treatment, Aarav can make a full recovery. Without your support, this brave little fighter might lose his battle. Every rupee you donate brings Aarav one step closer to a healthy childhood. His favorite toy is a small red car, and he dreams of becoming a pilot when he grows up. Please help make his dreams come true.',
                    goal: 1500000,
                    raised: 990000,
                    organizer: { name: 'Ramesh Kumar (Father)', uid: 'user_001' },
                    category: 'medical',
                    location: 'Nagpur, Maharashtra',
                    status: 'active',
                    urgent: true,
                    image: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=300&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=300&fit=crop',
                        'https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=400&h=300&fit=crop'
                    ],
                    donors: 287,
                    daysLeft: 23,
                    duration: '60',
                    created: new Date('2024-01-15')
                },
                {
                    id: 'camp_002',
                    title: 'Education for Meera - Dreams Shouldn\'t Die Due to Poverty',
                    description: 'Meera, a brilliant 17-year-old from a remote village in Rajasthan, scored 96% in her board exams but can\'t afford college fees. Her father, a farmer, lost his crop to drought. Meera dreams of becoming a doctor to serve her community. Your support can make her dream a reality.',
                    goal: 500000,
                    raised: 320000,
                    organizer: { name: 'Meera Sharma', uid: 'user_002' },
                    category: 'education',
                    location: 'Jodhpur, Rajasthan',
                    status: 'active',
                    urgent: false,
                    image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop',
                        'https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=400&h=300&fit=crop'
                    ],
                    donors: 156,
                    daysLeft: 45,
                    duration: '90',
                    created: new Date('2024-02-01')
                },
                {
                    id: 'camp_003',
                    title: 'Kerala Flood Relief - Rebuild Lives & Homes',
                    description: 'Devastating floods in Kerala have left thousands homeless. Families have lost everything - homes, belongings, and livelihoods. We\'re raising funds to provide immediate relief including food, shelter, clean water, and medical aid to affected families. Your donation can help rebuild lives.',
                    goal: 2000000,
                    raised: 1450000,
                    organizer: { name: 'Kerala Relief Foundation', uid: 'user_003' },
                    category: 'disaster',
                    location: 'Kochi, Kerala',
                    status: 'active',
                    urgent: true,
                    image: 'https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=400&h=300&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=400&h=300&fit=crop'
                    ],
                    donors: 890,
                    daysLeft: 12,
                    duration: '30',
                    created: new Date('2024-02-10')
                },
                {
                    id: 'camp_004',
                    title: 'Save Tommy - Injured Street Dog Needs Surgery',
                    description: 'Tommy, a friendly street dog, was hit by a vehicle and has severe injuries to his hind legs. The local animal shelter is struggling to cover his surgery costs of ₹75,000. Tommy is in pain but still wags his tail when he sees people. Help us give Tommy a second chance at life.',
                    goal: 75000,
                    raised: 48000,
                    organizer: { name: 'Paws & Hearts Animal Shelter', uid: 'user_004' },
                    category: 'animal',
                    location: 'Pune, Maharashtra',
                    status: 'active',
                    urgent: true,
                    image: 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=300&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=300&fit=crop'
                    ],
                    donors: 95,
                    daysLeft: 8,
                    duration: '30',
                    created: new Date('2024-02-20')
                },
                {
                    id: 'camp_005',
                    title: 'Help Ravi Clear Agricultural Debt & Save His Farm',
                    description: 'Ravi, a small farmer from Andhra Pradesh, is drowning in debt after consecutive crop failures due to unpredictable weather. He owes ₹3 lakhs to moneylenders charging high interest. Without help, he might lose his ancestral land. Your support can help him clear debt and restart farming.',
                    goal: 300000,
                    raised: 125000,
                    organizer: { name: 'Ravi Reddy', uid: 'user_005' },
                    category: 'debt',
                    location: 'Guntur, Andhra Pradesh',
                    status: 'active',
                    urgent: false,
                    image: 'https://images.unsplash.com/photo-1605000797499-95a51c5269ae?w=400&h=300&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1605000797499-95a51c5269ae?w=400&h=300&fit=crop'
                    ],
                    donors: 67,
                    daysLeft: 67,
                    duration: 'ongoing',
                    created: new Date('2024-01-25')
                },
                {
                    id: 'camp_006',
                    title: 'Clean Water Project for Tribal Village',
                    description: 'A remote tribal village in Odisha has been without clean drinking water for years. Villagers, mostly women and children, walk 5km daily to fetch water. We\'re building a borewell and water purification system to provide clean water to 200+ families. Your donation brings hope.',
                    goal: 800000,
                    raised: 580000,
                    organizer: { name: 'Tribal Welfare Society', uid: 'user_006' },
                    category: 'social',
                    location: 'Rayagada, Odisha',
                    status: 'active',
                    urgent: false,
                    image: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop',
                    images: [
                        'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop'
                    ],
                    donors: 234,
                    daysLeft: 28,
                    duration: '60',
                    created: new Date('2024-01-30')
                }
            ];
            
            allCampaigns = [...campaigns];
            renderCampaigns();
        }

        // Image preview functions for campaign creation
        function previewCampaignImages(event) {
            const files = Array.from(event.target.files);
            const maxFiles = 5;
            
            if (files.length > maxFiles) {
                showNotification(`You can only upload ${maxFiles} images maximum.`, 'warning');
                return;
            }

            campaignImages = files.slice(0, maxFiles);
            const previewContainer = document.getElementById('imagePreview');
            previewContainer.innerHTML = '';

            campaignImages.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const previewItem = document.createElement('div');
                    previewItem.className = 'image-preview-item';
                    previewItem.innerHTML = `
                        <img src="${e.target.result}" alt="Preview ${index + 1}">
                        <button type="button" class="image-preview-remove" onclick="removeCampaignImage(${index})">×</button>
                    `;
                    previewContainer.appendChild(previewItem);
                };
                reader.readAsDataURL(file);
            });
        }

        function removeCampaignImage(index) {
            campaignImages.splice(index, 1);
            
            // Update file input
            const fileInput = document.getElementById('campaignImages');
            const dt = new DataTransfer();
            campaignImages.forEach(file => dt.items.add(file));
            fileInput.files = dt.files;
            
            // Re-render preview
            previewCampaignImages({ target: fileInput });
        }

        // Document upload functions for verification
        function handleDocumentUpload(input, docType) {
            const file = input.files[0];
            if (!file) return;

            const uploadDiv = input.parentNode;
            uploadDiv.classList.add('has-file');
            uploadDiv.innerHTML = `
                <i class="fas fa-check-circle" style="font-size: 2rem; color: var(--success); margin-bottom: 1rem;"></i>
                <p>${docType.toUpperCase()} uploaded successfully</p>
                <small>${file.name}</small>
            `;
        }

        // Profile picture functions
        function uploadProfilePicture() {
            document.getElementById('profilePictureInput').click();
        }

        async function handleProfilePictureUpload(event) {
            const file = event.target.files[0];
            if (!file || !currentUser) return;

            try {
                // Create a preview immediately
                const reader = new FileReader();
                reader.onload = function(e) {
                    const avatarElements = document.querySelectorAll('#profileAvatar, #userAvatarNav');
                    avatarElements.forEach(avatar => {
                        avatar.innerHTML = `<img src="${e.target.result}" alt="Profile Picture">`;
                    });
                };
                reader.readAsDataURL(file);

                showNotification('Profile picture updated successfully!', 'success');
            } catch (error) {
                showNotification('Failed to upload profile picture: ' + error.message, 'error');
            }
        }

        // Verification functions
        function showVerificationForm() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('profileSection').classList.remove('active');
            document.getElementById('verificationSection').classList.add('active');
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('withdrawalsSection').classList.remove('active');
        }

        async function submitVerification() {
            const aadhaar = document.getElementById('aadhaarNumber').value;
            const pan = document.getElementById('panNumber').value;
            const bankAccount = document.getElementById('bankAccount').value;
            const ifscCode = document.getElementById('ifscCode').value;
            const bankName = document.getElementById('bankName').value;
            const accountHolderName = document.getElementById('accountHolderName').value;

            if (!aadhaar || !pan || !bankAccount || !ifscCode || !bankName || !accountHolderName) {
                showNotification('Please fill in all required fields.', 'warning');
                return;
            }

            try {
                userVerificationStatus = 'pending';
                updateVerificationUI();
                showProfile();
                
                showNotification('Verification documents submitted successfully! We will review within 2-3 business days.', 'success');
                
                document.getElementById('verificationForm').reset();
            } catch (error) {
                showNotification('Failed to submit verification: ' + error.message, 'error');
            }
        }

        function updateVerificationUI() {
            const statusDiv = document.getElementById('verificationStatus');
            const withdrawalNotice = document.getElementById('withdrawalNotice');
            const withdrawalContent = document.getElementById('withdrawalContent');

            if (userVerificationStatus === 'verified') {
                statusDiv.className = 'verification-status verified';
                statusDiv.innerHTML = `
                    <h4><i class="fas fa-check-circle"></i> Account Verified</h4>
                    <p>Your account is fully verified. You can now create campaigns and withdraw funds.</p>
                `;
                if (withdrawalNotice) withdrawalNotice.style.display = 'none';
                if (withdrawalContent) withdrawalContent.style.display = 'block';
            } else if (userVerificationStatus === 'pending') {
                statusDiv.className = 'verification-status pending';
                statusDiv.innerHTML = `
                    <h4><i class="fas fa-clock"></i> Verification Pending</h4>
                    <p>Your verification documents are under review. We will notify you once approved.</p>
                `;
                if (withdrawalNotice) {
                    withdrawalNotice.className = 'verification-status pending';
                    withdrawalNotice.innerHTML = `
                        <h4><i class="fas fa-clock"></i> Verification Pending</h4>
                        <p>Your verification is under review. Withdrawals will be enabled once approved.</p>
                    `;
                }
            } else {
                statusDiv.className = 'verification-status unverified';
                statusDiv.innerHTML = `
                    <h4><i class="fas fa-exclamation-triangle"></i> Account Verification Required</h4>
                    <p>Please complete your profile verification to start fundraising and withdraw funds.</p>
                    <button class="btn btn-warning btn-small" onclick="showVerificationForm()">
                        <i class="fas fa-shield-alt"></i> Complete Verification
                    </button>
                `;
            }
        }

        // Withdrawal functions
        function showWithdrawals() {
            if (!currentUser) {
                showNotification('Please login to view withdrawals.', 'warning');
                openModal('loginModal');
                return;
            }
            
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('profileSection').classList.remove('active');
            document.getElementById('verificationSection').classList.remove('active');
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('withdrawalsSection').classList.add('active');
            
            updateVerificationUI();
            loadUserCampaignsForWithdrawal();
            
            // Close dropdown
            document.getElementById('dropdownMenu').style.display = 'none';
        }

        function loadUserCampaignsForWithdrawal() {
            const select = document.getElementById('withdrawalCampaign');
            if (!select) return;
            
            const userCampaigns = allCampaigns.filter(c => 
                c.organizer && c.organizer.uid === currentUser.uid && 
                c.status === 'active' && 
                (c.raised || c.raisedAmount || 0) > 0
            );
            
            select.innerHTML = '<option value="">Select campaign to withdraw from</option>';
            userCampaigns.forEach(campaign => {
                const raised = campaign.raised || campaign.raisedAmount || 0;
                select.innerHTML += `
                    <option value="${campaign.id}">
                        ${campaign.title} (₹${raised.toLocaleString()} raised)
                    </option>
                `;
            });
        }

        async function submitWithdrawalRequest() {
            const campaignId = document.getElementById('withdrawalCampaign').value;
            const amount = document.getElementById('withdrawalAmount').value;
            const purpose = document.getElementById('withdrawalPurpose').value;

            if (!campaignId || !amount || !purpose) {
                showNotification('Please fill in all required fields.', 'warning');
                return;
            }

            if (parseInt(amount) < 1000) {
                showNotification('Minimum withdrawal amount is ₹1,000.', 'warning');
                return;
            }

            try {
                showNotification('Withdrawal request submitted successfully! You will be notified once processed.', 'success');
                closeModal('withdrawalModal');
                document.getElementById('withdrawalForm').reset();
            } catch (error) {
                showNotification('Failed to submit withdrawal request: ' + error.message, 'error');
            }
        }

        // Global variables for OTP verification
        let pendingSignupData = null;
        let generatedOTP = null;
        let otpExpiryTime = null;

        // Firebase authentication functions
        async function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const { signInWithEmailAndPassword, getDocs, collection, query, where } = window.firebaseServices;
                const userCredential = await signInWithEmailAndPassword(window.firebaseServices.auth, email, password);
                
                let userData = {};
                
                showNotification('Login successful! Welcome back.', 'success');
                
                // Check if user is admin
                const isAdmin = email === 'vishuu7306@gmail.com';
                
                currentUser = {
                    uid: userCredential.user.uid,
                    name: userData.name || userCredential.user.displayName || email.split('@')[0],
                    email: userCredential.user.email,
                    phone: userData.phone || '',
                    isAdmin: isAdmin
                };
                
                updateAuthUI();
                closeModal('loginModal');
            } catch (error) {
                showNotification('Login failed: ' + error.message, 'error');
            }
        }

        async function handleSignup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const phone = document.getElementById('signupPhone').value;
            const password = document.getElementById('signupPassword').value;

            if (!name || !email || !phone || !password) {
                showNotification('Please fill in all required fields.', 'warning');
                return;
            }

            if (password.length < 6) {
                showNotification('Password must be at least 6 characters long.', 'warning');
                return;
            }

            // Store signup data temporarily
            pendingSignupData = { name, email, phone, password };
            
            // Generate and send OTP
            await sendSignupOTP(name, email);
        }

        async function sendSignupOTP(name, email) {
            try {
                // Generate 6-digit OTP
                generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();
                otpExpiryTime = Date.now() + (15 * 60 * 1000); // 15 minutes

                // Send OTP via EmailJS
                const templateParams = {
                    to_name: name,
                    to_email: email,
                    otp_code: generatedOTP,
                    from_name: 'Flapping Bird Team',
                    message: `Your OTP for Flapping Bird account verification is: ${generatedOTP}. This OTP will expire in 15 minutes. Please do not share this code with anyone.`
                };

                showNotification('Sending OTP...', 'info');
                
                await emailjs.send('service_1xqntbe', 'template_3dhsz8r', templateParams);
                
                // Close signup modal and show OTP modal
                closeModal('signupModal');
                openModal('otpModal');
                
                // Update OTP modal content
                document.getElementById('otpEmail').textContent = email;
                document.getElementById('otpCode').value = '';
                
                // Start countdown timer
                startOTPTimer();
                
                showNotification('OTP sent successfully! Please check your email inbox.', 'success');
                console.log('OTP sent successfully to:', email);
                
            } catch (error) {
                showNotification('Failed to send OTP: ' + error.message, 'error');
                console.error('Failed to send OTP:', error);
                
                // Don't show OTP modal if email failed
                if (document.getElementById('otpModal').style.display === 'block') {
                    closeModal('otpModal');
                    openModal('signupModal');
                }
            }
        }

        function startOTPTimer() {
            const timerElement = document.getElementById('otpTimer');
            const resendButton = document.getElementById('resendOTP');
            
            let timeLeft = 900; // 15 minutes in seconds
            resendButton.style.display = 'none';
            
            const timer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timerElement.textContent = 'OTP Expired';
                    resendButton.style.display = 'inline-block';
                    generatedOTP = null;
                    otpExpiryTime = null;
                }
                timeLeft--;
            }, 1000);
        }

        async function verifyOTP() {
            const enteredOTP = document.getElementById('otpCode').value.trim();
            
            if (!enteredOTP) {
                showNotification('Please enter the OTP code.', 'warning');
                return;
            }

            if (enteredOTP.length !== 6) {
                showNotification('OTP must be 6 digits.', 'warning');
                return;
            }

            if (!generatedOTP || Date.now() > otpExpiryTime) {
                showNotification('OTP has expired. Please request a new one.', 'error');
                document.getElementById('resendOTP').style.display = 'inline-block';
                return;
            }

            if (enteredOTP !== generatedOTP) {
                showNotification('Invalid OTP. Please check and try again.', 'error');
                // Clear the input for user to try again
                document.getElementById('otpCode').value = '';
                return;
            }

            // OTP verified successfully, now create account
            showNotification('OTP verified successfully! Creating your account...', 'success');
            await createAccountAfterOTP();
        }

        async function createAccountAfterOTP() {
            try {
                const { createUserWithEmailAndPassword, addDoc, collection } = window.firebaseServices;
                const { name, email, phone, password } = pendingSignupData;
                
                const userCredential = await createUserWithEmailAndPassword(window.firebaseServices.auth, email, password);
                
                // Send welcome email
                await sendWelcomeEmail(name, email);
                
                showNotification('Account created successfully! Welcome to Flapping Bird.', 'success');
                
                // Check if user is admin
                const isAdmin = email === 'vishuu7306@gmail.com';
                
                currentUser = {
                    uid: userCredential.user.uid,
                    name: name,
                    email: email,
                    phone: phone,
                    isAdmin: isAdmin
                };
                
                updateAuthUI();
                closeModal('otpModal');
                
                // Clear temporary data
                pendingSignupData = null;
                generatedOTP = null;
                otpExpiryTime = null;
                
            } catch (error) {
                showNotification('Account creation failed: ' + error.message, 'error');
            }
        }

        async function sendWelcomeEmail(name, email) {
            try {
                const templateParams = {
                    to_name: name,
                    to_email: email,
                    from_name: 'Flapping Bird Team',
                    message: `🎉 Welcome to Flapping Bird, ${name}!

Your account has been created successfully. You can now:
• Start your own fundraising campaign
• Donate to causes you care about  
• Join our community of changemakers

Thank you for being part of India's most trusted crowdfunding platform. Together, we can make a difference!

Best regards,
Team Flapping Bird`
                };

                await emailjs.send('service_1xqntbe', 'template_tiupsnw', templateParams);
                console.log('Welcome email sent successfully to:', email);
            } catch (error) {
                console.log('Welcome email sending failed (continuing anyway):', error);
                // Don't throw error - account creation should still succeed
            }
        }

        async function resendOTP() {
            if (pendingSignupData) {
                await sendSignupOTP(pendingSignupData.name, pendingSignupData.email);
            } else {
                showNotification('Session expired. Please start signup process again.', 'error');
                closeModal('otpModal');
                openModal('signupModal');
            }
        }

        function updateAuthUI() {
            const authSection = document.getElementById('authSection');
            const userMenu = document.getElementById('userMenu');
            const adminMenuItems = document.getElementById('adminMenuItems');
            
            if (currentUser) {
                authSection.style.display = 'none';
                userMenu.style.display = 'block';
                
                // Update user initials in both navbar and profile
                const initials = currentUser.name.charAt(0).toUpperCase();
                document.getElementById('userInitials').textContent = initials;
                
                // Update profile section
                document.getElementById('profileName').textContent = currentUser.name;
                document.getElementById('profileEmail').textContent = currentUser.email;
                document.getElementById('profilePhone').textContent = currentUser.phone || '+91-XXXXXXXXXX';
                document.getElementById('profileInitials').textContent = initials;
                
                // Show admin menu items if user is admin
                if (currentUser.isAdmin) {
                    adminMenuItems.style.display = 'block';
                } else {
                    adminMenuItems.style.display = 'none';
                }

                updateVerificationUI();
            } else {
                authSection.style.display = 'flex';
                userMenu.style.display = 'none';
            }
        }

        async function logout() {
            try {
                if (window.firebaseServices) {
                    await window.firebaseServices.signOut(window.firebaseServices.auth);
                }
                currentUser = null;
                userVerificationStatus = 'unverified';
                updateAuthUI();
                showHomePage();
                showNotification('Logged out successfully', 'success');
            } catch (error) {
                showNotification('Logout failed: ' + error.message, 'error');
            }
        }

        // Campaign management functions
        async function createCampaign() {
            if (!currentUser) {
                showNotification('Please login to create a campaign', 'warning');
                openModal('loginModal');
                return;
            }

            const formData = new FormData(document.getElementById('campaignForm'));
            
            try {
                const images = campaignImages.length > 0 ? 
                    campaignImages.map(() => getDefaultCategoryImage(formData.get('category'))) : 
                    [getDefaultCategoryImage(formData.get('category'))];

                const campaignData = {
                    title: formData.get('title'),
                    category: formData.get('category'),
                    description: formData.get('description'),
                    goalAmount: parseInt(formData.get('goal')),
                    goal: parseInt(formData.get('goal')),
                    location: formData.get('location'),
                    duration: formData.get('duration'),
                    raisedAmount: 0,
                    raised: 0,
                    organizer: {
                        uid: currentUser.uid,
                        name: currentUser.name,
                        email: currentUser.email
                    },
                    status: 'pending',
                    donorCount: 0,
                    donors: 0,
                    daysLeft: formData.get('duration') === 'ongoing' ? 999 : parseInt(formData.get('duration')),
                    urgent: false,
                    image: images[0],
                    images: images,
                    createdAt: new Date(),
                    created: new Date(),
                    updatedAt: new Date()
                };

                const newCampaign = {
                    id: 'camp_' + Date.now(),
                    ...campaignData
                };
                
                allCampaigns.push(newCampaign);
                
                closeModal('createCampaignModal');
                document.getElementById('campaignForm').reset();
                document.getElementById('imagePreview').innerHTML = '';
                campaignImages = [];
                
                showNotification('Campaign submitted for admin approval!', 'success');
                
            } catch (error) {
                showNotification('Failed to create campaign: ' + error.message, 'error');
            }
        }

        function getDefaultCategoryImage(category) {
            const images = {
                medical: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=300&fit=crop',
                education: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop',
                disaster: 'https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=400&h=300&fit=crop',
                animal: 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=300&fit=crop',
                debt: 'https://images.unsplash.com/photo-1605000797499-95a51c5269ae?w=400&h=300&fit=crop',
                social: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop'
            };
            return images[category] || images.medical;
        }

        function approveCampaign(campaignId) {
            const campaign = allCampaigns.find(c => c.id === campaignId);
            if (campaign && currentUser && currentUser.isAdmin) {
                campaign.status = 'active';
                campaigns.push(campaign);
                renderCampaigns(); // This will now display approved campaigns on the landing page
                renderAdminPanel();
                showNotification('Campaign approved and is now live on the platform!', 'success');
            }
        }

        function rejectCampaign(campaignId) {
            if (currentUser && currentUser.isAdmin) {
                if (confirm('Are you sure you want to reject this campaign?')) {
                    allCampaigns = allCampaigns.filter(c => c.id !== campaignId);
                    campaigns = campaigns.filter(c => c.id !== campaignId);
                    renderCampaigns();
                    renderAdminPanel();
                    showNotification('Campaign rejected and removed.', 'success');
                }
            }
        }

        function deleteCampaign(campaignId) {
            const campaign = allCampaigns.find(c => c.id === campaignId);
            if (!campaign) return;

            // Check permissions
            const canDelete = currentUser && (
                currentUser.isAdmin || 
                (campaign.organizer && campaign.organizer.uid === currentUser.uid)
            );

            if (!canDelete) {
                showNotification('You do not have permission to delete this campaign.', 'error');
                return;
            }

            if (confirm('Are you sure you want to delete this campaign? This action cannot be undone.')) {
                allCampaigns = allCampaigns.filter(c => c.id !== campaignId);
                campaigns = campaigns.filter(c => c.id !== campaignId);
                renderCampaigns();
                renderAdminPanel();
                showNotification('Campaign deleted successfully.', 'success');
            }
        }

        // Render functions
        function renderCampaigns(filter = 'all') {
            const grid = document.getElementById('campaignsGrid');
            let filteredCampaigns = campaigns.filter(c => c.status === 'active');
            
            if (filter !== 'all') {
                filteredCampaigns = filteredCampaigns.filter(c => c.category === filter);
            }

            if (filteredCampaigns.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: var(--gray);">
                        <i class="fas fa-search" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>No Campaigns Found</h3>
                        <p>No campaigns match your current filter.</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredCampaigns.map(campaign => {
                const raised = campaign.raised || campaign.raisedAmount || 0;
                const goal = campaign.goal || campaign.goalAmount;
                const progressPercentage = Math.min((raised / goal) * 100, 100);
                const canDelete = currentUser && (
                    currentUser.isAdmin || 
                    (campaign.organizer && campaign.organizer.uid === currentUser.uid)
                );

                return `
                    <div class="campaign-card" data-category="${campaign.category}">
                        <div class="campaign-image-container">
                            <img src="${campaign.image}" alt="${campaign.title}" class="campaign-image">
                            <div class="campaign-badge ${campaign.urgent ? 'urgent-badge' : ''}">${campaign.urgent ? 'URGENT' : 'ACTIVE'}</div>
                        </div>
                        <div class="campaign-content">
                            <h3 class="campaign-title">${campaign.title}</h3>
                            <p class="campaign-organizer">by ${campaign.organizer.name} • ${campaign.location}</p>
                            <p class="campaign-description">${campaign.description}</p>
                            <div class="campaign-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${progressPercentage}%"></div>
                                </div>
                                <div class="progress-info">
                                    <span class="amount-raised">₹${raised.toLocaleString()}</span>
                                    <span>₹${goal.toLocaleString()}</span>
                                </div>
                                <div class="progress-info">
                                    <span>${campaign.donors || 0} donors</span>
                                    <span>${campaign.daysLeft} days left</span>
                                </div>
                            </div>
                            <div class="campaign-footer">
                                <div class="campaign-actions">
                                    <button class="btn btn-outline btn-small" onclick="viewCampaign('${campaign.id}')">
                                        <i class="fas fa-eye"></i> View Campaign
                                    </button>
                                    <button class="btn btn-primary btn-small" onclick="showDonationModal('${campaign.id}')">
                                        <i class="fas fa-heart"></i> Donate
                                    </button>
                                </div>
                                ${canDelete ? `
                                    <div class="admin-actions">
                                        <button class="delete-btn" onclick="deleteCampaign('${campaign.id}')" title="Delete Campaign">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderAdminPanel() {
            if (!currentUser || !currentUser.isAdmin) return;

            const pendingContainer = document.getElementById('pendingCampaigns');
            const allContainer = document.getElementById('allCampaignsAdmin');
            
            const pendingCampaigns = allCampaigns.filter(c => c.status === 'pending');
            
            if (pendingCampaigns.length === 0) {
                pendingContainer.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--gray);">
                        <i class="fas fa-clipboard-check"></i>
                        <h3>No Pending Approvals</h3>
                        <p>All campaigns are currently approved.</p>
                    </div>
                `;
            } else {
                pendingContainer.innerHTML = pendingCampaigns.map(campaign => `
                    <div class="campaign-card" style="margin-bottom: 1rem;">
                        <div class="campaign-content">
                            <h3 class="campaign-title">${campaign.title}</h3>
                            <p class="campaign-organizer">by ${campaign.organizer.name} • ${campaign.location}</p>
                            <p class="campaign-description">${campaign.description}</p>
                            <p><strong>Goal:</strong> ₹${(campaign.goalAmount || campaign.goal).toLocaleString()}</p>
                            <p><strong>Category:</strong> ${campaign.category}</p>
                            <p><strong>Duration:</strong> ${campaign.duration === 'ongoing' ? 'Ongoing' : campaign.duration + ' days'}</p>
                            <div style="display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-primary btn-small" onclick="approveCampaign('${campaign.id}')">
                                    <i class="fas fa-check"></i> Approve
                                </button>
                                <button class="btn btn-danger btn-small" onclick="rejectCampaign('${campaign.id}')">
                                    <i class="fas fa-times"></i> Reject
                                </button>
                                <button class="btn btn-outline btn-small" onclick="editCampaignAsAdmin('${campaign.id}')">
                                    <i class="fas fa-edit"></i> Edit Campaign
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // Render all campaigns for admin
            allContainer.innerHTML = allCampaigns.map(campaign => `
                <div class="campaign-card" style="margin-bottom: 1rem;">
                    <div class="campaign-content">
                        <h3 class="campaign-title">${campaign.title}</h3>
                        <p class="campaign-organizer">by ${campaign.organizer.name} • ${campaign.location}</p>
                        <p><strong>Status:</strong> <span style="color: ${campaign.status === 'active' ? '#28a745' : '#ffc107'}">${campaign.status.toUpperCase()}</span></p>
                        <p><strong>Raised:</strong> ₹${(campaign.raised || campaign.raisedAmount || 0).toLocaleString()} / ₹${(campaign.goal || campaign.goalAmount).toLocaleString()}</p>
                        <div style="display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap;">
                            <button class="btn btn-outline btn-small" onclick="editCampaignAsAdmin('${campaign.id}')">
                                <i class="fas fa-edit"></i> Edit Details
                            </button>
                            <button class="btn btn-warning btn-small" onclick="manageCampaignImages('${campaign.id}')">
                                <i class="fas fa-images"></i> Manage Images
                            </button>
                            <button class="btn btn-secondary btn-small" onclick="setPaymentLink('${campaign.id}')">
                                <i class="fas fa-link"></i> Payment Link
                            </button>
                            <button class="btn btn-danger btn-small" onclick="deleteCampaign('${campaign.id}')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Admin functions for managing campaigns
        function editCampaignAsAdmin(campaignId) {
            const campaign = allCampaigns.find(c => c.id === campaignId);
            if (!campaign || !currentUser || !currentUser.isAdmin) return;

            const newTitle = prompt('Edit campaign title:', campaign.title);
            const newDescription = prompt('Edit campaign description:', campaign.description);
            const newGoal = prompt('Edit funding goal (₹):', campaign.goal || campaign.goalAmount);

            if (newTitle && newDescription && newGoal) {
                campaign.title = newTitle;
                campaign.description = newDescription;
                campaign.goal = parseInt(newGoal);
                campaign.goalAmount = parseInt(newGoal);
                
                renderCampaigns();
                renderAdminPanel();
                showNotification('Campaign updated successfully!', 'success');
            }
        }

        function manageCampaignImages(campaignId) {
            const campaign = allCampaigns.find(c => c.id === campaignId);
            if (!campaign || !currentUser || !currentUser.isAdmin) return;

            // Create file input element
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'image/*';
            fileInput.style.display = 'none';
            
            fileInput.onchange = function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                // Create preview
                const reader = new FileReader();
                reader.onload = function(e) {
                    campaign.image = e.target.result;
                    if (!campaign.images) campaign.images = [];
                    campaign.images[0] = e.target.result;
                    
                    renderCampaigns();
                    renderAdminPanel();
                    showNotification('Campaign image updated successfully!', 'success');
                };
                reader.readAsDataURL(file);
                
                // Clean up
                document.body.removeChild(fileInput);
            };
            
            // Add to DOM and trigger click
            document.body.appendChild(fileInput);
            fileInput.click();
        }

        function setPaymentLink(campaignId) {
            const campaign = allCampaigns.find(c => c.id === campaignId);
            if (!campaign || !currentUser || !currentUser.isAdmin) return;

            const paymentLink = prompt(`Enter Razorpay payment link for "${campaign.title}":\n\nExample formats:\n• Razorpay Payment Link: https://rzp.io/l/xxxxxxx\n• UPI Link: upi://pay?pa=example@okaxis&pn=Name\n• Custom Payment URL`, campaign.paymentLink || '');
            
            if (paymentLink && paymentLink.trim()) {
                campaign.paymentLink = paymentLink.trim();
                
                renderCampaigns();
                renderAdminPanel();
                showNotification('Payment link added successfully! Donations will now redirect to this payment gateway.', 'success');
            } else if (paymentLink === '') {
                // Empty string means remove payment link
                campaign.paymentLink = '';
                renderCampaigns();
                renderAdminPanel();
                showNotification('Payment link removed. Donations will use default processing.', 'info');
            }
        }

        // Campaign detail functions
        function viewCampaign(campaignId) {
            const campaign = campaigns.find(c => c.id === campaignId) || allCampaigns.find(c => c.id === campaignId);
            if (!campaign) return;

            currentCampaignId = campaignId;

            // Update campaign detail page
            document.getElementById('detailCampaignImage').src = campaign.image;
            document.getElementById('detailCampaignTitle').textContent = campaign.title;
            document.getElementById('detailCampaignOrganizer').textContent = campaign.organizer.name;
            document.getElementById('detailCampaignLocation').textContent = campaign.location;
            document.getElementById('detailCampaignDate').textContent = campaign.created.toLocaleDateString();
            document.getElementById('detailCampaignStory').textContent = campaign.description;
            
            const raised = campaign.raised || campaign.raisedAmount || 0;
            const goal = campaign.goal || campaign.goalAmount;
            const progressPercentage = Math.min((raised / goal) * 100, 100);
            
            document.getElementById('detailProgressFill').style.width = progressPercentage + '%';
            document.getElementById('detailAmountRaised').textContent = '₹' + raised.toLocaleString();
            document.getElementById('detailGoalAmount').textContent = '₹' + goal.toLocaleString();
            document.getElementById('detailDonorCount').textContent = (campaign.donors || 0) + ' donors';
            document.getElementById('detailDaysLeft').textContent = (campaign.daysLeft || 0) + ' days left';
            
            // Set badge
            const badge = document.getElementById('detailCampaignBadge');
            badge.textContent = campaign.urgent ? 'URGENT' : 'ACTIVE';
            badge.className = 'campaign-badge' + (campaign.urgent ? ' urgent-badge' : '');
            
            // Load sample donors
            loadSampleDonors();
            
            // Show campaign detail page
            showCampaignDetail();
        }

        function loadSampleDonors() {
            loadCampaignDonors(currentCampaignId);
        }

        function loadCampaignDonors(campaignId) {
            const donorsList = document.getElementById('donorsList');
            const campaign = campaigns.find(c => c.id === campaignId) || allCampaigns.find(c => c.id === campaignId);
            
            let donors = [];
            
            // Use actual donors if available, otherwise use sample data
            if (campaign && campaign.donorsList && campaign.donorsList.length > 0) {
                donors = campaign.donorsList;
            } else {
                // Sample donors for display
                donors = [
                    { name: 'Anonymous', amount: 5000, message: 'Praying for your recovery!' },
                    { name: 'Rajesh Kumar', amount: 10000, message: 'Stay strong!' },
                    { name: 'Priya Sharma', amount: 2500, message: 'Hope this helps.' },
                    { name: 'Anonymous', amount: 1000, message: 'Best wishes' },
                    { name: 'Amit Singh', amount: 7500, message: 'Get well soon!' }
                ];
            }

            donorsList.innerHTML = donors.map(donor => `
                <div class="donor-item">
                    <div class="donor-info">
                        <h4>${donor.name}</h4>
                        <p style="color: var(--gray); font-size: 0.9rem;">${donor.message}</p>
                        ${donor.date ? `<small style="color: var(--gray);">${new Date(donor.date).toLocaleDateString()}</small>` : ''}
                    </div>
                    <div class="donor-amount">₹${donor.amount.toLocaleString()}</div>
                </div>
            `).join('');
        }

        // Donation functions
        function showDonationModal(campaignId) {
            const campaign = campaigns.find(c => c.id === campaignId) || allCampaigns.find(c => c.id === campaignId);
            if (!campaign) return;

            currentCampaignId = campaignId;
            
            const raised = campaign.raised || campaign.raisedAmount || 0;
            const goal = campaign.goal || campaign.goalAmount;
            
            document.getElementById('donationCampaignInfo').innerHTML = `
                <div style="background: var(--light); padding: 1.5rem; border-radius: 8px;">
                    <h3>${campaign.title}</h3>
                    <p style="color: var(--gray); margin: 0.5rem 0;">by ${campaign.organizer.name}</p>
                    <div style="display: flex; justify-content: space-between; margin-top: 1rem;">
                        <span><strong>Goal:</strong> ₹${goal.toLocaleString()}</span>
                        <span><strong>Raised:</strong> ₹${raised.toLocaleString()}</span>
                    </div>
                </div>
            `;

            // Pre-fill donor info if user is logged in
            if (currentUser) {
                document.getElementById('donorName').value = currentUser.name;
                document.getElementById('donorEmail').value = currentUser.email;
            }

            openModal('donationModal');
        }

        function setDonationAmount(amount) {
            document.getElementById('donationAmount').value = amount;
        }

        async function processDonation(amount, name, email, message) {
            const campaign = campaigns.find(c => c.id === currentCampaignId) || allCampaigns.find(c => c.id === currentCampaignId);
            if (!campaign) return;

            try {
                // Check if campaign has a payment link (Razorpay)
                if (campaign.paymentLink) {
                    // Redirect to payment link
                    const paymentUrl = campaign.paymentLink.includes('?') 
                        ? `${campaign.paymentLink}&amount=${amount}&name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}`
                        : `${campaign.paymentLink}?amount=${amount}&name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}`;
                    
                    // Store donation details for completion after payment
                    sessionStorage.setItem('pendingDonation', JSON.stringify({
                        campaignId: currentCampaignId,
                        amount: amount,
                        name: name,
                        email: email,
                        message: message
                    }));
                    
                    window.open(paymentUrl, '_blank');
                    closeModal('donationModal');
                    showNotification('Redirecting to payment gateway...', 'info');
                } else {
                    // Fallback: Direct donation processing (for demo)
                    await completeDonation(currentCampaignId, amount, name, email, message);
                }
                
                document.getElementById('donationForm').reset();
            } catch (error) {
                showNotification('Donation failed: ' + error.message, 'error');
            }
        }

        async function completeDonation(campaignId, amount, name, email, message) {
            const campaign = campaigns.find(c => c.id === campaignId) || allCampaigns.find(c => c.id === campaignId);
            if (!campaign) return;

            // Update campaign with new donation
            const currentRaised = campaign.raised || campaign.raisedAmount || 0;
            const currentDonors = campaign.donors || 0;
            
            campaign.raised = currentRaised + parseInt(amount);
            campaign.raisedAmount = campaign.raised;
            campaign.donors = currentDonors + 1;

            // Add donor to campaign's donor list
            if (!campaign.donorsList) {
                campaign.donorsList = [];
            }
            campaign.donorsList.unshift({
                name: name,
                amount: parseInt(amount),
                message: message || 'Thank you for your support!',
                date: new Date(),
                email: email
            });

            // Send thank you email via EmailJS
            await sendThankYouEmail(name, email, amount, campaign.title);
            
            renderCampaigns();
            
            // Update donor list if on campaign detail page
            if (document.getElementById('campaignDetail').classList.contains('active')) {
                loadCampaignDonors(campaignId);
            }
            
            showNotification(`Thank you ${name}! Your donation of ₹${amount} has been processed successfully.`, 'success');
        }

        async function sendThankYouEmail(donorName, donorEmail, amount, campaignTitle) {
            try {
                const templateParams = {
                    to_name: donorName,
                    to_email: donorEmail,
                    donation_amount: amount,
                    campaign_title: campaignTitle,
                    from_name: 'Flapping Bird Team',
                    message: `🙏 Thank you for your generous donation, ${donorName}!

Your donation of ₹${amount.toLocaleString()} to "${campaignTitle}" has been processed successfully.

Your kindness and generosity make a real difference in someone's life. Because of donors like you, we can continue to support those who need it most.

You will receive a tax receipt shortly for your donation.

With gratitude,
Team Flapping Bird

"Small acts of kindness create ripples of change that reach far beyond what we can see."`
                };

                await emailjs.send('service_1xqntbe', 'template_tiupsnw', templateParams);
                console.log('Thank you email sent successfully to:', donorEmail);
            } catch (error) {
                console.error('Failed to send thank you email:', error);
            }
        }

        // Navigation functions
        function showHomePage() {
            document.getElementById('homePage').style.display = 'block';
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('profileSection').classList.remove('active');
            document.getElementById('verificationSection').classList.remove('active');
            document.getElementById('withdrawalsSection').classList.remove('active');
        }

        function showCampaignDetail() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('campaignDetail').classList.add('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('profileSection').classList.remove('active');
            document.getElementById('verificationSection').classList.remove('active');
            document.getElementById('withdrawalsSection').classList.remove('active');
        }

        function showProfile() {
            if (!currentUser) {
                showNotification('Please login to view your profile.', 'warning');
                openModal('loginModal');
                return;
            }
            
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('profileSection').classList.add('active');
            document.getElementById('verificationSection').classList.remove('active');
            document.getElementById('withdrawalsSection').classList.remove('active');
            
            updateVerificationUI();
            
            // Close dropdown
            document.getElementById('dropdownMenu').style.display = 'none';
        }

        function showAdminPanel() {
            if (!currentUser || !currentUser.isAdmin) {
                showNotification('Access denied. Admin privileges required.', 'error');
                return;
            }
            
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.add('active');
            document.getElementById('profileSection').classList.remove('active');
            document.getElementById('verificationSection').classList.remove('active');
            document.getElementById('withdrawalsSection').classList.remove('active');
            renderAdminPanel();
        }

        // Filter functions
        function filterCampaigns(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-filter="${category}"]`).classList.add('active');
            renderCampaigns(category);
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function toggleDropdown() {
            const dropdown = document.getElementById('dropdownMenu');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        // Utility functions
        function checkAuthAndStartCampaign() {
            if (!currentUser) {
                openModal('loginModal');
                return;
            }
            openModal('createCampaignModal');
        }

        function openDonationModal() {
            if (currentCampaignId) {
                showDonationModal(currentCampaignId);
            }
        }

        function shareCampaign() {
            if (currentCampaignId) {
                const campaignUrl = `${window.location.origin}?campaign=${currentCampaignId}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Support this campaign',
                        text: 'Help make a difference by supporting this fundraising campaign',
                        url: campaignUrl
                    });
                } else {
                    navigator.clipboard.writeText(campaignUrl).then(() => {
                        showNotification('Campaign link copied to clipboard!', 'success');
                    }).catch(() => {
                        showNotification('Campaign URL: ' + campaignUrl, 'info');
                    });
                }
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        // Function to handle payment completion (call this when user returns from payment)
        function handlePaymentSuccess() {
            const pendingDonation = sessionStorage.getItem('pendingDonation');
            if (pendingDonation) {
                const donation = JSON.parse(pendingDonation);
                completeDonation(donation.campaignId, donation.amount, donation.name, donation.email, donation.message);
                sessionStorage.removeItem('pendingDonation');
            }
        }

        // Check for pending donation on page load
        window.addEventListener('focus', function() {
            // Check if user returned from payment gateway
            const pendingDonation = sessionStorage.getItem('pendingDonation');
            if (pendingDonation) {
                // Show confirmation dialog
                if (confirm('Did you complete your payment successfully?')) {
                    handlePaymentSuccess();
                } else {
                    sessionStorage.removeItem('pendingDonation');
                }
            }
        });

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeSampleCampaigns();
            
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });

            // Signup form
            document.getElementById('signupForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleSignup();
            });

            // OTP form
            document.getElementById('otpForm').addEventListener('submit', function(e) {
                e.preventDefault();
                verifyOTP();
            });

            // Campaign form
            document.getElementById('campaignForm').addEventListener('submit', function(e) {
                e.preventDefault();
                createCampaign();
            });

            // Verification form
            document.getElementById('verificationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                submitVerification();
            });

            // Withdrawal form
            document.getElementById('withdrawalForm').addEventListener('submit', function(e) {
                e.preventDefault();
                submitWithdrawalRequest();
            });

            // Donation form
            document.getElementById('donationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const amount = document.getElementById('donationAmount').value;
                const name = document.getElementById('donorName').value;
                const email = document.getElementById('donorEmail').value;
                const message = document.getElementById('donorMessage').value;
                
                processDonation(amount, name, email, message);
            });

            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.dataset.filter;
                    filterCampaigns(filter);
                });
            });

            // Close modals when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.user-menu')) {
                    document.getElementById('dropdownMenu').style.display = 'none';
                }
            });

            // Firebase auth state listener
            if (window.firebaseServices) {
                window.firebaseServices.onAuthStateChanged(window.firebaseServices.auth, (user) => {
                    if (user && !currentUser) {
                        // User is signed in but currentUser is not set
                        const isAdmin = user.email === 'vishuu7306@gmail.com';
                        currentUser = {
                            uid: user.uid,
                            name: user.displayName || user.email.split('@')[0],
                            email: user.email,
                            phone: '',
                            isAdmin: isAdmin
                        };
                        updateAuthUI();
                    } else if (!user && currentUser) {
                        // User is signed out
                        currentUser = null;
                        updateAuthUI();
                    }
                });
            }
        });

        // My Donations Section
        function showMyDonations() {
            if (!currentUser) {
                showNotification('Please login to view your donations.', 'warning');
                openModal('loginModal');
                return;
            }
            
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('profileSection').classList.remove('active');
            document.getElementById('verificationSection').classList.remove('active');
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('withdrawalsSection').classList.remove('active');
            document.getElementById('myDonationsSection').classList.add('active');
            
            loadMyDonations();
            
            // Close dropdown
            document.getElementById('dropdownMenu').style.display = 'none';
        }

        function loadMyDonations() {
            const donationsContainer = document.getElementById('userDonationsList');
            
            // For demo purposes, show sample donations or empty state
            const sampleDonations = [
                {
                    id: 'don_001',
                    campaignTitle: 'Help 4-Year-Old Aarav Fight Leukemia',
                    amount: 5000,
                    date: new Date('2024-02-15'),
                    message: 'Praying for quick recovery!'
                },
                {
                    id: 'don_002',
                    campaignTitle: 'Education for Meera',
                    amount: 2500,
                    date: new Date('2024-02-10'),
                    message: 'Education is the key to success!'
                }
            ];
            
            // Check if user has donations (for demo, randomly show donations or empty state)
            const hasDonations = Math.random() > 0.7; // 30% chance of having donations
            
            if (!hasDonations || sampleDonations.length === 0) {
                donationsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-hand-holding-heart"></i>
                        <h3>No Donations Yet</h3>
                        <p>You haven't made any donations yet. Your generosity can change lives and make a real difference in someone's journey.</p>
                        <div style="margin: 2rem 0;">
                            <h4 style="color: var(--primary); margin-bottom: 1rem;">Ready to Make a Greater Good?</h4>
                            <p style="color: var(--gray); margin-bottom: 2rem;">Every donation, no matter how small, creates ripples of hope. Join thousands of compassionate Indians in supporting causes that matter.</p>
                        </div>
                        <button class="btn btn-primary btn-large" onclick="showHomePage(); setTimeout(scrollToCampaigns, 100);">
                            <i class="fas fa-heart"></i> Donate Now to Make a Greater Good
                        </button>
                        <button class="btn btn-outline" onclick="showHomePage(); setTimeout(scrollToCampaigns, 100);" style="margin-left: 1rem;">
                            <i class="fas fa-search"></i> Browse All Campaigns
                        </button>
                    </div>
                `;
            } else {
                donationsContainer.innerHTML = `
                    <div style="margin-bottom: 2rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--light); border-radius: 8px;">
                            <div>
                                <h4 style="margin: 0; color: var(--primary);">Total Donated: ₹${sampleDonations.reduce((sum, d) => sum + d.amount, 0).toLocaleString()}</h4>
                                <p style="margin: 0; color: var(--gray);">Thank you for making a difference!</p>
                            </div>
                            <button class="btn btn-primary" onclick="showHomePage(); setTimeout(scrollToCampaigns, 100);">
                                <i class="fas fa-plus"></i> Donate More
                            </button>
                        </div>
                    </div>
                    ${sampleDonations.map(donation => `
                        <div class="campaign-card" style="margin-bottom: 1rem;">
                            <div class="campaign-content">
                                <h3 class="campaign-title">${donation.campaignTitle}</h3>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin: 1rem 0;">
                                    <span style="font-size: 1.2rem; font-weight: 600; color: var(--primary);">₹${donation.amount.toLocaleString()}</span>
                                    <span style="color: var(--gray);">${donation.date.toLocaleDateString()}</span>
                                </div>
                                <p style="color: var(--gray); font-style: italic;">"${donation.message}"</p>
                                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border);">
                                    <button class="btn btn-outline btn-small" onclick="downloadTaxReceipt('${donation.id}')">
                                        <i class="fas fa-download"></i> Download Tax Receipt
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                `;
            }
        }

        function downloadTaxReceipt(donationId) {
            showNotification('Tax receipt downloaded successfully!', 'success');
        }

        // Settings Section
        function showSettings() {
            if (!currentUser) {
                showNotification('Please login to access settings.', 'warning');
                openModal('loginModal');
                return;
            }
            
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('profileSection').classList.remove('active');
            document.getElementById('verificationSection').classList.remove('active');
            document.getElementById('campaignDetail').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('withdrawalsSection').classList.remove('active');
            document.getElementById('myDonationsSection').classList.remove('active');
            document.getElementById('settingsSection').classList.add('active');
            
            loadSettings();
            
            // Close dropdown
            document.getElementById('dropdownMenu').style.display = 'none';
        }

        function loadSettings() {
            const settingsContainer = document.getElementById('settingsContent');
            
            settingsContainer.innerHTML = `
                <div class="profile-card">
                    <h3><i class="fas fa-user-cog"></i> Account Preferences</h3>
                    <div class="form-group">
                        <label class="form-label">Email Notifications</label>
                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" checked> Campaign updates and milestones
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" checked> New campaigns in your interest areas
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox"> Weekly digest of trending campaigns
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Privacy Settings</label>
                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" checked> Show my name in donation lists
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox"> Allow others to contact me about campaigns
                            </label>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary">Save Preferences</button>
                </div>
                
                <div class="profile-card" style="margin-top: 2rem;">
                    <h3><i class="fas fa-wallet"></i> Payment & Withdrawal Settings</h3>
                    <div style="background: #fff3e0; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; border-left: 4px solid #f57c00;">
                        <h4 style="margin: 0 0 1rem 0; color: #f57c00;">Withdrawal Management</h4>
                        <p style="margin: 0; color: #f57c00;">All withdrawals are subject to verification and require proper documentation. Complete your account verification to enable withdrawals.</p>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-outline" onclick="showVerificationForm()">
                            <i class="fas fa-shield-alt"></i> Complete Verification
                        </button>
                        <button class="btn btn-outline" onclick="showWithdrawals()">
                            <i class="fas fa-money-bill"></i> Withdrawal History
                        </button>
                    </div>
                </div>
                
                <div class="profile-card" style="margin-top: 2rem;">
                    <h3><i class="fas fa-chart-line"></i> Campaign Analytics</h3>
                    <p style="color: var(--gray); margin-bottom: 1.5rem;">Track the performance of your campaigns and understand your donor base.</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="text-align: center; padding: 1rem; background: var(--light); border-radius: 8px;">
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--primary);">0</div>
                            <div style="color: var(--gray);">Active Campaigns</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: var(--light); border-radius: 8px;">
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--success);">₹0</div>
                            <div style="color: var(--gray);">Total Raised</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: var(--light); border-radius: 8px;">
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--accent);">0</div>
                            <div style="color: var(--gray);">Total Supporters</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="showProfile()">
                        <i class="fas fa-plus"></i> Create New Campaign
                    </button>
                </div>
                
                <div class="profile-card" style="margin-top: 2rem;">
                    <h3><i class="fas fa-graduation-cap"></i> Student Fundraising</h3>
                    <div style="background: #e3f2fd; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                        <h4 style="margin: 0 0 1rem 0; color: #1976d2;">Special Support for Students</h4>
                        <p style="margin: 0 0 1rem 0; color: #1565c0;">Students can raise donations for:</p>
                        <ul style="margin: 0; padding-left: 1.5rem; color: #1565c0;">
                            <li><strong>Purchasing Books:</strong> Textbooks, reference materials, and study guides</li>
                            <li><strong>Tuition Fees:</strong> College fees, course fees, and examination fees</li>
                            <li><strong>Educational Equipment:</strong> Laptops, tablets, and software for studies</li>
                            <li><strong>Research Projects:</strong> Funding for thesis, research, and project work</li>
                            <li><strong>Educational Travel:</strong> Conference attendance, internships, and study abroad</li>
                        </ul>
                    </div>
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="checkAuthAndStartCampaign()">
                            <i class="fas fa-graduation-cap"></i> Start Student Campaign
                        </button>
                    </div>
                </div>
                
                <div class="profile-card" style="margin-top: 2rem;">
                    <h3><i class="fas fa-trash-alt"></i> Account Actions</h3>
                    <p style="color: var(--gray); margin-bottom: 1.5rem;">Manage your account data and preferences.</p>
                    
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-outline" onclick="exportAccountData()">
                            <i class="fas fa-download"></i> Export Account Data
                        </button>
                        <button class="btn btn-danger" onclick="deleteAccount()">
                            <i class="fas fa-exclamation-triangle"></i> Delete Account
                        </button>
                    </div>
                </div>
            `;
        }

        function exportAccountData() {
            showNotification('Account data export initiated. You will receive an email shortly.', 'success');
        }

        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                showNotification('Account deletion requested. Please check your email for confirmation.', 'warning');
            }
        }

        // Dummy functions for navbar links
        function showMyCampaigns() { 
            showProfile(); // Redirect to profile page which shows campaigns
        }
        
        function editProfile() { 
            showNotification('Profile editing feature coming soon!', 'info'); 
        }
        
        function scrollToCampaigns() { 
            document.getElementById('campaigns').scrollIntoView({ behavior: 'smooth' }); 
        }

        // Info modal functionality for footer sections
        function openInfoModal(type) {
            const modal = document.getElementById('infoModal');
            const title = document.getElementById('infoModalTitle');
            const icon = document.getElementById('infoModalIcon');
            const body = document.getElementById('infoModalBody');
            
            const infoContent = {
                howItWorks: {
                    icon: 'fas fa-info-circle',
                    title: 'How It Works',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>1. Create Your Campaign</h3>
                            <p>Tell your story, add photos, and set your fundraising goal. Our team reviews each campaign to ensure authenticity.</p>
                            
                            <h3>2. Share Your Campaign</h3>
                            <p>Share your campaign link with friends, family, and social media. The more people who see it, the more support you'll receive.</p>
                            
                            <h3>3. Receive Donations</h3>
                            <p>Donors can contribute directly through our secure platform. All donations are processed safely and securely.</p>
                            
                            <h3>4. Withdraw Funds</h3>
                            <p>Request withdrawals anytime with proper documentation. Funds are transferred to your verified bank account within 3-5 business days.</p>
                            
                            <h3>5. Update Your Supporters</h3>
                            <p>Keep donors informed about your progress and how their contributions are making a difference.</p>
                        </div>
                    `
                },
                safety: {
                    icon: 'fas fa-shield-alt',
                    title: 'Safety & Security',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>Campaign Verification</h3>
                            <p>Every campaign is manually reviewed by our team. We verify organizer identity and campaign authenticity before approval.</p>
                            
                            <h3>Secure Payments</h3>
                            <p>All payments are processed through PCI DSS compliant gateways. We use industry-standard encryption to protect your data.</p>
                            
                            <h3>Fund Protection</h3>
                            <p>Funds are held in secure escrow accounts. Withdrawals require proper documentation and verification.</p>
                            
                            <h3>Fraud Prevention</h3>
                            <p>We use advanced fraud detection systems and manual reviews to prevent misuse of our platform.</p>
                            
                            <h3>24/7 Monitoring</h3>
                            <p>Our security team monitors the platform round-the-clock for suspicious activities and ensures user safety.</p>
                        </div>
                    `
                },
                pricing: {
                    icon: 'fas fa-rupee-sign',
                    title: 'Pricing & Fees',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>Platform Fee: 5%</h3>
                            <p>We charge a 5% platform fee on successfully raised funds to maintain our platform and provide support services.</p>
                            
                            <h3>Payment Gateway Charges</h3>
                            <p>Standard payment gateway charges apply (2-3%) for processing donations through credit/debit cards and digital wallets.</p>
                            
                            <h3>No Hidden Costs</h3>
                            <p>Creating campaigns is completely free. You only pay when you successfully raise funds.</p>
                            
                            <h3>Withdrawal Fees</h3>
                            <p>Bank transfer charges may apply based on your bank's policy. We don't charge extra for fund withdrawals.</p>
                            
                            <h3>Tax Benefits</h3>
                            <p>Donations made through our platform are eligible for tax benefits under Section 80G of the Income Tax Act.</p>
                        </div>
                    `
                },
                help: {
                    icon: 'fas fa-question-circle',
                    title: 'Help Center & FAQs',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>Frequently Asked Questions</h3>
                            
                            <h4>How do I create a campaign?</h4>
                            <p>Click "Start Fundraiser", fill in your campaign details, upload supporting documents, and submit for review.</p>
                            
                            <h4>How long does verification take?</h4>
                            <p>Campaign verification typically takes 24-48 hours. Account verification may take 2-3 business days.</p>
                            
                            <h4>When can I withdraw funds?</h4>
                            <p>You can request withdrawals anytime after receiving donations. Provide proper documentation for faster processing.</p>
                            
                            <h4>What documents do I need?</h4>
                            <p>For verification: Aadhaar, PAN, and bank details. For withdrawals: Bills, receipts, or medical reports related to your cause.</p>
                            
                            <h4>Is there a minimum withdrawal amount?</h4>
                            <p>Yes, the minimum withdrawal amount is ₹1,000 to cover processing costs.</p>
                            
                            <h4>How do I share my campaign?</h4>
                            <p>Use the share button on your campaign page to share via social media, WhatsApp, email, or copy the link.</p>
                            
                            <h4>Can I edit my campaign after submission?</h4>
                            <p>Minor edits are allowed. Contact support for major changes after campaign approval.</p>
                            
                            <h4>What if my campaign doesn't reach its goal?</h4>
                            <p>You can still withdraw the funds raised. Most campaigns receive ongoing support even after their target date.</p>
                        </div>
                    `
                },
                contact: {
                    icon: 'fas fa-headset',
                    title: 'Contact Support',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>24/7 Support Available</h3>
                            <p>Our dedicated support team is here to help you with any questions or concerns.</p>
                            
                            <h3>Contact Methods</h3>
                            <div style="background: var(--light); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                                <p><strong>📞 Phone:</strong> +91-124-4567890 (24/7)</p>
                                <p><strong>📧 Email:</strong> support@flappingbird.in</p>
                                <p><strong>💬 Live Chat:</strong> Available on our website</p>
                                <p><strong>📱 WhatsApp:</strong> +91-9876543210</p>
                            </div>
                            
                            <h3>Support Hours</h3>
                            <p>Our team is available 24/7 for urgent issues. General queries are responded to within 2-4 hours.</p>
                            
                            <h3>Common Issues We Help With</h3>
                            <ul>
                                <li>Campaign creation and verification</li>
                                <li>Payment and withdrawal issues</li>
                                <li>Account verification problems</li>
                                <li>Technical difficulties</li>
                                <li>Donor refund requests</li>
                            </ul>
                        </div>
                    `
                },
                terms: {
                    icon: 'fas fa-file-contract',
                    title: 'Terms of Service',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>Platform Usage</h3>
                            <p>By using Flapping Bird, you agree to use the platform responsibly and for legitimate fundraising purposes only.</p>
                            
                            <h3>Campaign Guidelines</h3>
                            <p>All campaigns must be truthful, legal, and for genuine causes. Misrepresentation may result in account suspension.</p>
                            
                            <h3>Payment Terms</h3>
                            <p>Platform fees and payment gateway charges apply as mentioned in our pricing policy.</p>
                            
                            <h3>Withdrawal Policy</h3>
                            <p>Funds can be withdrawn after proper verification. We reserve the right to hold funds for suspicious activities.</p>
                            
                            <h3>Account Termination</h3>
                            <p>We may terminate accounts that violate our terms or engage in fraudulent activities.</p>
                            
                            <h3>Limitation of Liability</h3>
                            <p>Flapping Bird acts as a platform facilitator. Campaign success depends on organizer efforts and donor response.</p>
                        </div>
                    `
                },
                privacy: {
                    icon: 'fas fa-user-shield',
                    title: 'Privacy Policy',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>Data Collection</h3>
                            <p>We collect only necessary information to provide our services - personal details, payment information, and campaign data.</p>
                            
                            <h3>Data Usage</h3>
                            <p>Your data is used for account management, payment processing, and improving our services. We don't sell personal information.</p>
                            
                            <h3>Data Security</h3>
                            <p>We use industry-standard encryption and security measures to protect your personal and financial information.</p>
                            
                            <h3>Third-Party Sharing</h3>
                            <p>We share data only with trusted payment processors and service providers under strict confidentiality agreements.</p>
                            
                            <h3>Cookie Policy</h3>
                            <p>We use cookies to improve user experience and analyze platform usage. You can control cookie settings in your browser.</p>
                            
                            <h3>Data Rights</h3>
                            <p>You have the right to access, modify, or delete your personal data. Contact support for data-related requests.</p>
                        </div>
                    `
                },
                refund: {
                    icon: 'fas fa-undo',
                    title: 'Refund Policy',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>Donor Refunds</h3>
                            <p>Donors can request refunds within 7 days of donation if the campaign is found to be fraudulent or misrepresented.</p>
                            
                            <h3>Campaign Cancellation</h3>
                            <p>If a campaign is cancelled or found invalid, all donations are automatically refunded to donors within 5-7 business days.</p>
                            
                            <h3>Platform Fee Refunds</h3>
                            <p>Platform fees are non-refundable once a campaign is successfully completed and funds are withdrawn.</p>
                            
                            <h3>Payment Gateway Charges</h3>
                            <p>Payment gateway charges are non-refundable as they are processed by third-party providers.</p>
                            
                            <h3>Refund Process</h3>
                            <p>Refunds are processed to the original payment method within 5-10 business days after approval.</p>
                            
                            <h3>Dispute Resolution</h3>
                            <p>For refund disputes, contact our support team with transaction details and reason for refund request.</p>
                        </div>
                    `
                },
                guidelines: {
                    icon: 'fas fa-clipboard-list',
                    title: 'Campaign Guidelines',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>Allowed Campaigns</h3>
                            <ul>
                                <li>Medical treatments and emergency healthcare</li>
                                <li>Education fees, books, and learning materials</li>
                                <li>Disaster relief and emergency assistance</li>
                                <li>Animal welfare and rescue operations</li>
                                <li>Community development projects</li>
                                <li>Debt relief for genuine financial hardships</li>
                            </ul>
                            
                            <h3>Prohibited Content</h3>
                            <ul>
                                <li>False or misleading information</li>
                                <li>Illegal activities or purposes</li>
                                <li>Hate speech or discrimination</li>
                                <li>Personal profit or business ventures</li>
                                <li>Political campaigns or religious conversion</li>
                            </ul>
                            
                            <h3>Documentation Required</h3>
                            <p>Medical campaigns: Hospital bills, doctor's reports, treatment estimates</p>
                            <p>Education campaigns: Admission letters, fee receipts, student ID</p>
                            <p>Emergency campaigns: Official reports, damage certificates</p>
                        </div>
                    `
                },
                tax: {
                    icon: 'fas fa-receipt',
                    title: 'Tax Benefits',
                    body: `
                        <div style="line-height: 1.6;">
                            <h3>Tax Deduction for Donors</h3>
                            <p>Donations made through registered charitable campaigns are eligible for tax deduction under Section 80G of the Income Tax Act.</p>
                            
                            <h3>Tax Receipts</h3>
                            <p>Eligible donors receive official tax receipts via email within 48 hours of donation.</p>
                            
                            <h3>TDS on Withdrawals</h3>
                            <p>TDS may be applicable on large withdrawals as per current tax regulations. Consult your tax advisor for details.</p>
                            
                            <h3>GST on Platform Fees</h3>
                            <p>Platform fees include applicable GST as per current tax rates.</p>
                            
                            <h3>Income Tax Liability</h3>
                            <p>Campaign organizers are responsible for declaring received funds as per income tax regulations.</p>
                        </div>
                    `
                }
            };
            
            const content = infoContent[type];
            if (content) {
                icon.className = content.icon;
                title.innerHTML = `<i class="${content.icon}"></i> ${content.title}`;
                body.innerHTML = content.body;
                modal.style.display = 'block';
            }
        }
    </script>
</body>
</html>
